webpackJsonp([4],{"7F5v":function(t,e){},F1bC:function(t,e){},NsU1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),n=a.n(l),r=a("Dd8w"),i=a.n(r),s=a("BO1k"),o=a.n(s),c=a("NYxO"),u={data:function(){return{isLoading:!1,dataName:[],list:[],data:[],params:{},columns:[{key:"UserName",label:"用户名"},{key:"URL",label:"链接地址"},{key:"DbType",label:"数据库类型"},{key:"DriverClassName",label:"驱动类名"},{key:"FilterClassNames",label:"filter类名"},{key:"TestOnBorrow",label:"获取连接时检测"},{key:"TestWhileIdle",label:"空闲时检测"},{key:"TestOnReturn",label:"连接放回连接池时检测"},{key:"InitialSize",label:"初始化连接大小"},{key:"MinIdle",label:" 最小空闲连接数"},{key:"MaxActive",label:"最大连接数"},{key:"QueryTimeout",label:"查询超时时间"},{key:"TransactionQueryTimeout",label:"事务查询超时时间"},{key:"LoginTimeout",label:"登录超时时间"},{key:"ValidConnectionCheckerClassName",label:"连接有效性检查类名"},{key:"ExceptionSorterClassName",label:"ExceptionSorter类名"},{key:"DefaultAutoCommit",label:"默认autocommit设置"},{key:"DefaultReadOnly",label:"默认只读设置"},{key:"DefaultTransactionIsolation",label:"默认事务隔离"},{key:"NotEmptyWaitCount",label:"等待次数"},{key:"NotEmptyWaitMillis",label:"等待最大时长"},{key:"WaitThreadCount",label:"等待线程数量"},{key:"StartTransactionCount",label:"事务启动数"},{key:"TransactionHistogram",label:"事务时间分布"},{key:"PoolingCount",label:"池中连接数"},{key:"PoolingPeak",label:"池中连接数峰值"},{key:"PoolingPeakTime",label:"池中连接数峰值时间"},{key:"ActiveCount",label:"活跃连接数"},{key:"ActivePeak",label:"活跃连接数峰值"},{key:"ActivePeakTime",label:"活跃连接数峰值时间"},{key:"LogicConnectCount",label:"逻辑连接打开次数"},{key:"LogicCloseCount",label:"逻辑连接关闭次数"},{key:"LogicConnectErrorCount",label:"逻辑连接错误次数"},{key:"PhysicalConnectCount",label:"物理连接打开次数"},{key:"PhysicalCloseCount",label:"物理关闭数量"},{key:"PhysicalConnectErrorCount",label:"物理连接错误次数"},{key:"ExecuteCount",label:"执行数"},{key:"ErrorCount",label:"错误数"},{key:"CommitCount",label:"提交数"},{key:"RollbackCount",label:"回滚数"},{key:"PSCacheAccessCount",label:"PSCache访问次数"},{key:"PSCacheHitCount",label:"PSCache命中次数"},{key:"PSCacheMissCount",label:"PSCache丢失次数"},{key:"ConnectionHoldTimeHistogram",label:"连接持有时间分布"},{key:"ClobOpenCount",label:"Clob打开次数"},{key:"BlobOpenCount",label:"Blob打开次数"},{key:"ActiveConnectionStackTrace",label:"活跃连接堆栈查看"},{key:"PollingConnectionInfo",label:"连接池中连接信息"},{key:"SQLList",label:"sql列表"}],explain:{UserName:"指定建立连接时使用的用户名",URL:"jdbc连接字符串",DbType:"数据库类型",DriverClassName:"jdbc驱动的类名",FilterClassNames:"filter类名",TestOnBorrow:"是否在获得连接后检测其可用性",TestWhileIdle:"是否在连接空闲一段时间后检测其可用性",TestOnReturn:"是否在连接放回连接池后检测其可用性",InitialSize:"连接池建立时创建的初始化连接数",MinIdle:"连接池中最小的活跃连接数",MaxActive:"连接池中最大的活跃连接数",QueryTimeout:"查询超时时间",TransactionQueryTimeout:"事务查询超时时间",LoginTimeout:"",ValidConnectionCheckerClassName:"",ExceptionSorterClassName:"",DefaultAutoCommit:"",DefaultReadOnly:"",DefaultTransactionIsolation:"",NotEmptyWaitCount:"获取连接时最多等待多少次",NotEmptyWaitMillis:"获取连接时最多等待多长时间",WaitThreadCount:"当前等待获取连接的线程数",StartTransactionCount:"事务开始的个数",TransactionHistogram:"事务运行时间分布，分布区间为[0-10 ms, 10-100 ms, 100-1 s, 1-10 s, 10-100 s, >100 s]",PoolingCount:"当前连接池中的数目",PoolingPeak:"连接池中数目的峰值",PoolingPeakTime:"连接池数目峰值出现的时间",ActiveCount:"当前连接池中活跃连接数",ActivePeak:"连接池中活跃连接数峰值",ActivePeakTime:"活跃连接池峰值出现的时间",LogicConnectCount:"产生的逻辑连接建立总数",LogicCloseCount:"产生的逻辑连接关闭总数",LogicConnectErrorCount:"产生的逻辑连接出错总数",PhysicalConnectCount:"产生的物理连接建立总数",PhysicalCloseCount:"产生的物理关闭总数",PhysicalConnectErrorCount:"产生的物理连接失败总数",ExecuteCount:"",ErrorCount:"",CommitCount:"",RollbackCount:"",PSCacheAccessCount:"PSCache访问总数",PSCacheHitCount:"PSCache命中次数",PSCacheMissCount:"PSCache丢失次数",ConnectionHoldTimeHistogram:"连接持有时间分布，分布区间为[0-1 ms, 1-10 ms, 10-100 ms, 100ms-1s, 1-10 s, 10-100 s, 100-1000 s, >1000 s]",ClobOpenCount:"Clob打开数",BlobOpenCount:"Blob打开数",ActiveConnectionStackTrace:"",PollingConnectionInfo:"",SQLList:""}}},methods:i()({},Object(c.b)("druid",["datasource"]),{rowsStyle:function(t){return{wordBreak:"break-all",width:"50%"}},getList:function(t){var e=this;e.isLoading=!0,e.datasource({ip:t.ip||"",group:t.group||"",port:t.port||""}).then(function(t){if(t&&"0000"===t.code){e.data=t.data&&t.data.Content||[],e.list=[];try{e.data=JSON.parse(t.data).Content||[]}catch(t){}var a=!0,l=!1,n=void 0;try{for(var r,i=o()(e.data);!(a=(r=i.next()).done);a=!0){var s=r.value,c=[],u={};for(var b in s)u[b]=String(s[b]);c.push(u),c.push(e.explain),e.list.push(c)}}catch(t){l=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(l)throw n}}}else e.$message.error(t.message||"datasource错误");e.isLoading=!1}).catch(function(t){e.$message.error(t&&t.data&&t.data.message||"datasource错误"),e.isLoading=!1})}}),mounted:function(){n()(this.params,this.$route.query)}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[a("el-tabs",{attrs:{type:"border-card"}},t._l(t.data,function(e,l){return a("el-tab-pane",{key:l,attrs:{label:e.Name}},[a("div",[a("div",{staticClass:"title"},[a("h2",[t._v("Basic Info For "+t._s(e.Name))])]),t._v(" "),a("div",{staticClass:"table"},[a("gl-mail-table",{attrs:{tableData:t.list[l],columns:t.columns,tableStyle:{width:"100%"},columnsStyle:{width:"20%"},rowsStyle:t.rowsStyle(l)}})],1)])])}))],1)},staticRenderFns:[]};var d=a("VU/8")(u,b,!1,function(t){a("Td78")},"data-v-04cade94",null).exports,p=a("mvHQ"),m=a.n(p),v={data:function(){return{isLoading:!1,list:[],params:{},timer:null,currentPage:1,pageSize:10}},props:{ative:{type:String,default:""}},methods:i()({},Object(c.b)("druid",["sql"]),{getList:function(t,e){var a=this;t||(a.isLoading=!0),a.sql({ip:e.ip||"",group:e.group||"",port:e.port||""}).then(function(t){if(a.isLoading=!1,t&&"0000"!==t.code)a.$message.error(t.message||"SQL错误");else{a.list=t.data&&t.data.Content||[];try{a.list=(t.data&&JSON.parse(t.data)).Content||[]}catch(t){}var e=!0,l=!1,n=void 0;try{for(var r,i=o()(a.list);!(e=(r=i.next()).done);e=!0){var s=r.value;try{s.Histogram=m()(s.Histogram),s.ExecuteAndResultHoldTimeHistogram=m()(s.ExecuteAndResultHoldTimeHistogram),s.FetchRowCountHistogram=m()(s.FetchRowCountHistogram),s.EffectedRowCountHistogram=m()(s.EffectedRowCountHistogram)}catch(t){}}}catch(t){l=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(l)throw n}}}}).catch(function(t){a.isLoading=!1,a.$message.error(t&&t.data&&t.data.message||"sql错误")})},handleCurrentChange:function(t){this.currentPage=t},handleSizeChange:function(t){this.pageSize=t},openSqlDetail:function(t){this.$router.push({path:"/druid/sqlDetail",query:{sqlId:t.ID,ip:this.params.ip,port:this.params.port,group:this.params.group}})}}),watch:{$route:function(t,e){"druidmonitor"!==t.name&&(clearInterval(this.timer),this.timer=null)},ative:function(t){var e=this;"sqlStat"!==t?(clearInterval(e.timer),e.timer=null):(clearInterval(e.timer),e.timer=null,e.timer=setInterval(function(){e.getList(!0,e.params)},5e3))}},mounted:function(){var t=this;n()(t.params,t.$route.query),"sqlStat"===t.ative&&(clearInterval(t.timer),t.timer=null,t.timer=setInterval(function(){t.getList(!0,t.params)},5e3))}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[a("div",{staticClass:"title"}),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.list.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:"","default-sort":{prop:"ID",order:"ascending"}}},[a("el-table-column",{attrs:{sortable:"",prop:"ID",width:"60",align:"center",label:"N"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"SQL",width:"150",label:"SQL"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"white-space":"inherit"},attrs:{size:"small",title:e.row.SQL,type:"text"},on:{click:function(a){t.openSqlDetail(e.row)}}},[t._v(t._s(e.row.SQL))])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"ExecuteCount",width:"90",label:"执行数"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"TotalTime",width:"100",label:"执行时间"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"MaxTimespan",width:"80",label:"最慢"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"InTransactionCountDesc",width:"90",label:"事务中"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"ErrorCount",width:"90",label:"错误数"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"EffectedRowCount",width:"100",label:"更新行数"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"FetchRowCount",width:"100",label:"读取行数"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"RunningCount",width:"90",label:"执行中"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",align:"center",prop:"ConcurrentMax",width:"100",label:"最大并发"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"Histogram",label:"执行时间分布",width:"135"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ExecuteAndResultHoldTimeHistogram",label:"执行+RS时分布",width:"135"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"FetchRowCountHistogram",label:"读取分布",width:"135"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"EffectedRowCountHistogram",label:"更新行分布",width:"135"}})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.list.length},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])},staticRenderFns:[]};var g=a("VU/8")(v,h,!1,function(t){a("awe4")},"data-v-982c3b0a",null).exports,C=a("Xxa5"),f=a.n(C),y=a("exGp"),w=a.n(y),_={data:function(){return{isLoading:!1,columns:[{key:"Version",label:"版本"},{key:"Drivers",label:"驱动"},{key:"ResetEnable",label:"是否允许重复"},{key:"ResetCount",label:"重置次数"},{key:"JavaVersion",label:"java版本"},{key:"JavaVMName",label:"jvm名称"},{key:"JavaClassPath",label:"classpath路径"}],list:[],params:{}}},methods:i()({},Object(c.b)("druid",["basic"]),{getList:function(t){var e=this;return w()(f.a.mark(function a(){var l;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(l=e).list=[],l.isLoading=!0,a.next=5,l.basic({ip:t.ip||"",group:t.group||"",port:t.port||""}).then(function(t){if(t&&"0000"===t.code){try{l.list.push(JSON.parse(t.data).Content)}catch(t){}var e=!0,a=!1,n=void 0;try{for(var r,i=o()(l.list);!(e=(r=i.next()).done);e=!0){var s=r.value;s.Drivers=s.Drivers.join("<br>")}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}}else l.$message.error(t.message||"basic错误")}).catch(function(t){l.$message.error(t&&t.data&&t.data.message||"basic错误")});case 5:l.isLoading=!1;case 6:case"end":return a.stop()}},a,e)}))()}}),mounted:function(){n()(this.params,this.$route.query)}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.isLoading,expression:"isLoading"}]},[e("div",{staticClass:"title"}),this._v(" "),e("div",{staticClass:"table"},[e("gl-mail-table",{attrs:{tableData:this.list,columns:this.columns,tableStyle:{width:"100%"},columnsStyle:{width:"20%"}}})],1)])},staticRenderFns:[]};var S=a("VU/8")(_,k,!1,function(t){a("7F5v")},"data-v-0519887e",null).exports,L={data:function(){return{params:{},columns:[],data:[],list:[]}},methods:i()({},Object(c.b)("druid",["webapp"]),{getList:function(t){var e=this,a={RunningCount:"执行中",ConcurrentMax:"最大并发",RequestCount:"请求次数",JdbcCommitCount:"事务提交数",JdbcRollbackCount:"事务回滚数",JdbcExecuteCount:"Jdbc执行数",JdbcExecuteTimeMillis:"Jdbc时间",JdbcFetchRowCount:"读取行数",JdbcUpdateCount:"更新行数"};e.webapp({ip:t.ip,group:t.group,port:t.port}).then(function(t){if(t&&"0000"===t.code){e.data=t.data.Content||[];try{e.data=JSON.parse(t.data).Content||[]}catch(t){}if(e.columns=[],e.data.length>0){for(var l in e.data[0])e.data[0].hasOwnProperty(l)&&e.columns.push({key:l,label:a[l]||l});e.list=[];var n=!0,r=!1,i=void 0;try{for(var s,c=o()(e.data);!(n=(s=c.next()).done);n=!0){var u=s.value,b=[],d={};for(var p in u)d[p]=String(u[p]);b.push(d),e.list.push(b)}}catch(t){r=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}}}else e.$message.error(t.message||"webapp错误")}).catch(function(t){e.$message.error(t&&t.data&&t.data.message||"webapp错误")})}}),mounted:function(){n()(this.params,this.$route.query)}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"}},t._l(t.data,function(e,l){return a("el-tab-pane",{key:l,attrs:{label:"WebApp-"+e.ContextPath}},[a("div",[a("div",{staticClass:"title"}),t._v(" "),a("div",{attrs:{calss:"table"}},[a("gl-mail-table",{attrs:{tableData:t.list[l],columns:t.columns,tableStyle:{width:"100%"},columnsStyle:{width:"30%"}}})],1)])])}))],1)},staticRenderFns:[]};var T=a("VU/8")(L,x,!1,function(t){a("F1bC")},"data-v-e90cfbb0",null).exports,P={data:function(){return{params:{},list:[],isLoading:!1,isInterval:!0,timerValue:5,timer:null,currentPage:1,pageSize:10,timerOptions:[{value:5,label:"5S"},{value:10,label:"10s"},{value:20,label:"20S"},{value:30,label:"30S"},{value:60,label:"60S"}]}},props:{ative:{type:String,default:""}},methods:i()({},Object(c.b)("druid",["webUri"]),{getList:function(t,e){var a=this;t||(a.isLoading=!0),a.webUri({ip:e.ip,group:e.group,port:e.port}).then(function(t){if(t&&"0000"===t.code){a.list=t.data.Content||[];try{a.list=JSON.parse(t.data).Content||[]}catch(t){}}a.list.forEach(function(t){try{t.Histogram=m()(t.Histogram)}catch(t){}}),a.isLoading=!1}).catch(function(t){a.$message.error(t&&t.data&&t.data.message||"webUri错误"),a.isLoading=!1})},handleCurrentChange:function(t){this.currentPage=t},handleSizeChange:function(t){this.pageSize=t},intervalCtrl:function(){var t=this;t.isInterval=!t.isInterval,t.isInterval?t.getInterval():(clearInterval(t.timer),t.timer=null)},getInterval:function(){var t=this;clearInterval(t.timer),t.timer=null,t.timer=setInterval(function(){t.getList(!0,t.params)},1e3*t.timerValue)},openWeburiDetail:function(t){this.$router.push({path:"/druid/weburiDetail",query:{uri:t.URI,ip:this.params.ip,port:this.params.port,group:this.params.group}})}}),mounted:function(){n()(this.params,this.$route.query),"webUri"===this.ative&&this.getInterval()},watch:{$route:function(t,e){"druidmonitor"!==t.name&&(clearInterval(this.timer),this.timer=null)},ative:function(t){"webUri"!==t?(clearInterval(this.timer),this.timer=null):this.getInterval()}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"}),t._v(" "),a("div",{staticClass:"table"},[a("div",{staticStyle:{float:"right"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"刷新时间:"}},[a("el-select",{staticStyle:{width:"70px"},attrs:{size:"mini"},on:{change:t.getInterval},model:{value:t.timerValue,callback:function(e){t.timerValue=e},expression:"timerValue"}},t._l(t.timerOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isInterval,expression:"isInterval"}],attrs:{type:"primary",size:"mini"},on:{click:t.intervalCtrl}},[t._v("暂停刷新")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isInterval,expression:"!isInterval"}],attrs:{type:"warning",size:"mini"},on:{click:t.intervalCtrl}},[t._v("开始刷新")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{data:t.list.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:"","default-sort":{type:"index",order:"descending"}}},[a("el-table-column",{attrs:{label:"N",type:"index",width:"80",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"URI",label:"URI",width:"200",sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"white-space":"inherit"},attrs:{size:"small",title:e.row.URI,type:"text"},on:{click:function(a){t.openWeburiDetail(e.row)}}},[t._v(t._s(e.row.URI))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"RequestCount",label:"请求次数",width:"100",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RequestTimeMillis",label:"请求时间",width:"100",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"RunningCount",label:"执行中",width:"90",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ConcurrentMax",label:"最大并发",width:"100",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcExecuteCount",label:"Jdbc执行数",width:"120",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcExecuteErrorCount",label:"Jdbc出错数",sortable:"",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcExecuteTimeMillis",label:"Jdbc时间",sortable:"",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcCommitCount",label:"事务提交数",sortable:"",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcRollbackCount",label:"事务回滚数",sortable:"",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcFetchRowCount",label:"读取行数",sortable:"",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"JdbcUpdateCount",label:"更新行数",sortable:"",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Histogram",label:"区间分布",width:"180",align:"center"}})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.list.length},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[]};var I=a("VU/8")(P,R,!1,function(t){a("sVaZ")},"data-v-c4e1ebac",null).exports,E={data:function(){return{timer:null,isLoading:!1,params:{},columns:[{key:"checkCount",label:"检查次数"},{key:"hardCheckCount",label:"硬检查次数"},{key:"violationCount",label:"非法次数"},{key:"blackListHitCount",label:"黑名单命中次数"},{key:"BlackListSize",label:"黑名单长度"},{key:"whiteListHitCount",label:"白名单命中次数"},{key:"whiteListSize",label:"白名单长度"},{key:"syntaxErrrorCount",label:"语法错误次数"}],list:[],statList:[],functionList:[],whiteList:[],blackList:[]}},props:{ative:{type:String,default:""}},methods:i()({},Object(c.b)("druid",["wall"]),{getList:function(t,e){var a=this;t||(a.isLoading=!0),a.wall({ip:e.ip,group:e.group,port:e.port}).then(function(t){if(t&&"0000"===t.code){var e=t.data&&t.data.Content||{};try{e=JSON.parse(t.data).Content||{}}catch(t){}a.list=[e],a.statList=e.tables||[],a.functionList=e.functions||[],a.whiteList=e.whiteList||[],a.blackList=e.blackList||[];var l=!0,n=!1,r=void 0;try{for(var i,s=o()(a.statList);!(l=(i=s.next()).done);l=!0){var c=i.value;c.fetchRowCountHistogram&&(c.fetchRowCountHistogram=m()(c.fetchRowCountHistogram)),c.deleteDataCountHistogram&&(c.deleteDataCountHistogram=m()(c.deleteDataCountHistogram)),c.updateDataCountHistogram&&(c.updateDataCountHistogram=m()(c.updateDataCountHistogram))}}catch(t){n=!0,r=t}finally{try{!l&&s.return&&s.return()}finally{if(n)throw r}}}else a.$message.error(t&&t.message||"wall错误");a.isLoading=!1}).catch(function(t){a.$message.error(t&&t.data&&t.data.message||"wall错误"),a.isLoading=!1})}}),mounted:function(){n()(this.params,this.$route.query)},watch:{$route:function(t,e){"druidmonitor"!==t.name&&(clearInterval(this.timer),this.timer=null)},ative:function(t){var e=this;"sqlWall"!==t?(clearInterval(e.timer),e.timer=null):(clearInterval(e.timer),e.timer=null,e.timer=setInterval(function(){e.getList(!0,e.params)},5e3))}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[t._m(0),t._v(" "),a("div",{staticClass:"table"},[a("gl-mail-table",{attrs:{columns:t.columns,tableData:t.list,tableStyle:{width:"100%"},columnsStyle:{width:"30%"}}})],1),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.statList,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"表名",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("div",{staticStyle:{"text-align":"left"}},[t._v(t._s(l.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"selectCount",label:"Select数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"selectIntoCount",label:"SelectInto数",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"insertCount",label:"Insert数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateCount",label:"Update数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"deleteCount",label:"Delete数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"truncateCount",label:"Truncate数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createCount",label:"Create数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"alterCount",label:"Alter数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"dropCount",label:"Drop数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"replaceCount",label:"Replace数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"deleteDataCountHistogram",label:"删除数据行数",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateDataCount",label:"更新行分布",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateDataCountHistogram",label:"更新数据行数",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"fetchRowCount",label:"读取行数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"fetchRowCountHistogram",label:"读取行分布",width:"100"}})],1)],1),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.functionList,stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"Function Name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"invokeCount",label:"InvokeCount"}})],1)],1),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.whiteList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sql",label:"SQL",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sample",label:"样本",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"executeCount",label:"执行数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"executeErrorCount",label:"执行出错数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fetchRowCount",label:"读取行数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateCount",label:"更新行数"}})],1)],1),t._v(" "),t._m(4),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.blackList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sql",label:"SQL",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sample",label:"样本",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"violationMessage",label:"violationMessage"}}),t._v(" "),a("el-table-column",{attrs:{prop:"executeCount",label:"执行数",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fetchRowCount",label:"读取行数",width:"76"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateCount",label:"更新行数",width:"76"}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("防御统计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("表访问统计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("函数调用统计")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("SQL防御统计 - 白名单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("SQL防御统计 - 黑名单")])])}]};var H={components:{dataSource:d,sqlStat:g,homePage:S,webApp:T,webUri:I,sqlWall:a("VU/8")(E,$,!1,function(t){a("rLkR")},"data-v-415131bd",null).exports},data:function(){return{params:{},ativeTab:"homePage"}},methods:i()({},Object(c.b)("druid",["resetAll"]),{reset:function(){var t=this;t.resetAll(t.params).then(function(e){e&&"0000"===e.code?t.$message.success("重置成功"):t.$message.error(e&&e.message||"重置失败"),t.changeTab(t.ativeTab)}).catch(function(e){t.$message.error(e&&e.message||"重置失败")})},changeTab:function(t){switch(t){case"homePage":this.$refs.homePage.getList(this.params);break;case"dataSource":this.$refs.dataSource.getList(this.params);break;case"sqlStat":this.$refs.sqlStat.getList(!1,this.params);break;case"webApp":this.$refs.webApp.getList(this.params);break;case"webUri":this.$refs.webUri.getList(!1,this.params);break;case"sqlWall":this.$refs.sqlWall.getList(!1,this.params)}}}),watch:{ativeTab:function(t){this.changeTab(t)}},mounted:function(){n()(this.params,this.$route.query),this.changeTab(this.ativeTab)}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"button-group"},[a("span",{staticClass:"route-name"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"fa fa-repeat"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("div",[a("el-tabs",{model:{value:t.ativeTab,callback:function(e){t.ativeTab=e},expression:"ativeTab"}},[a("el-tab-pane",{attrs:{label:"首页",name:"homePage"}},[a("home-page",{ref:"homePage"})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"数据源",name:"dataSource"}},[a("data-source",{ref:"dataSource"})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"SQL监控",name:"sqlStat"}},[a("sql-stat",{ref:"sqlStat",attrs:{ative:t.ativeTab}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"SQL防火墙",name:"sqlWall"}},[a("sql-wall",{ref:"sqlWall",attrs:{ative:t.ativeTab}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Web应用",name:"webApp"}},[a("web-app",{ref:"webApp"})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"URI监控",name:"webUri"}},[a("web-uri",{ref:"webUri",attrs:{ative:t.ativeTab}})],1)],1)],1)])},staticRenderFns:[]};var q=a("VU/8")(H,D,!1,function(t){a("jc+h")},"data-v-65463c1d",null);e.default=q.exports},Td78:function(t,e){},awe4:function(t,e){},"jc+h":function(t,e){},rLkR:function(t,e){},sVaZ:function(t,e){}});