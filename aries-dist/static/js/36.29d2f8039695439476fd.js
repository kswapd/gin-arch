webpackJsonp([36],{e6zN:function(e,t){},hfRV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("INCx"),i=a.n(n),l=a("ZlkZ"),r={name:"zipkinEcharts",data:function(){return{loading:!1,detailData:[],zipkinFrom:{dateTime:[(new Date).getTime()-864e5,new Date]}}},computed:{timeHorizon:function(){return this.zipkinFrom.dateTime&&this.zipkinFrom.dateTime.length>0?{startTime:new Date(this.zipkinFrom.dateTime[0]).getTime(),endTime:new Date(this.zipkinFrom.dateTime[1]).getTime()}:null}},mounted:function(){},methods:{analysis:function(){this.timeHorizon?this.getData(this.timeHorizon):this.$message({message:"不能为空",type:"warning"})},getData:function(e){var t=this,a=e.startTime,n=e.endTime;this.loading=!0,this.$axios.get(l.a.spanDuration,{params:{startTime:a,endTime:n}}).then(function(e){t.$message({message:"查询成功",type:"success"}),t.detailData=e,t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error(e&&e.data&&e.data.message||"ERROR")})}},filters:{successRate:function(e){return e.callNumber&&e.successNumber?i()(e.successNumber/e.callNumber*1e3)/10+"%":"0%"},zipkinNameFilter:function(e){if(e&&e.length>0){var t=e.lastIndexOf(".");return-1!==t?e.slice(0,t):e}return e}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"zipkinEcharts"},[a("div",{staticClass:"button-group"},[a("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))])]),e._v(" "),a("div",{staticClass:"header",staticStyle:{width:"100%",height:"100%"}},[a("el-form",{ref:"zipkinFrom",attrs:{model:e.zipkinFrom,"label-width":"82px","label-position":"left",size:"small"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{xl:8,lg:12}},[a("el-form-item",{attrs:{label:"时间范围："}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.zipkinFrom.dateTime,callback:function(t){e.$set(e.zipkinFrom,"dateTime",t)},expression:"zipkinFrom.dateTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{xl:4,lg:6}},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.loading},on:{click:e.analysis}},[e._v(e._s(e.$t("common.search")))])],1)],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.detailData,size:"small"}},[a("el-table-column",{attrs:{align:"center","min-width":"140","show-overflow-tooltip":"",prop:"name",label:"服务名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                   "+e._s(t.row.spanName)+"\n               ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"130",prop:"avgDuration",label:"平均响应时间(ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                   "+e._s(Math.trunc(t.row.avgDuration)/1e3)+"\n               ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"130",prop:"maxDuration",label:"最大响应时间(ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                   "+e._s(Math.trunc(t.row.maxDuration)/1e3)+"\n               ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"130",prop:"minDuration",label:"最小响应时间(ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                   "+e._s(Math.trunc(t.row.minDuration)/1e3)+"\n               ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"130",label:"成功率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                   "+e._s(e._f("successRate")(t.row,e.value))+"\n               ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"130",prop:"callNumber",label:"调用次数"}})],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(e){a("e6zN")},"data-v-44c1edb0",null);t.default=o.exports}});