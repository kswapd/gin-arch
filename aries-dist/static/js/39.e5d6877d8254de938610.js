webpackJsonp([39],{O7xm:function(e,t){},gfAj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("fZjL"),o=a.n(l),r=a("woOf"),n=a.n(r),i=a("Dd8w"),p=a.n(i),s=a("NYxO"),c=a("ZlkZ"),u={data:function(){return{currentPage:1,pageSize:10,opForm:{operTimeMin:"",operTimeMax:"",omType:"",operType:"",operNode:""},loading:!1,level_list:[{value:0,label:"启动"},{value:1,label:"停止"},{value:2,label:"重启"},{value:3,label:"部署"},{value:4,label:"卸载"},{value:5,label:"增加"},{value:6,label:"删除"},{value:7,label:"查询"},{value:8,label:"更新"}],paramsData:{},operationTypeArray:["启动","停止","重启","部署","卸载","增加","删除","查询","更新"]}},computed:p()({},Object(s.d)({operationLog:function(e){return e.log.operationLog}})),mounted:function(){var e=this;e.currentPage=1,e.paramsData={limit:e.pageSize,offset:e.currentPage},e.getOperationLog(e)},methods:p()({},Object(s.b)("log",["getOperationLog","exportOpeLog"]),{handleSizeChange:function(e){var t=this;t.pageSize=e,t.currentPage=1,t.paramsData={limit:t.pageSize,offset:t.currentPage},t.getOperationLog(t)},handleCurrentChange:function(e){var t=this;t.currentPage=e,t.paramsData={limit:t.pageSize,offset:t.currentPage},t.getOperationLog(t)},search:function(){var e=this;e.paramsData=n()({limit:e.pageSize,offset:e.currentPage},e.opForm),e.getOperationLog(e)},getUrl:function(e,t){return t?(e+="?",o()(t).forEach(function(a){e+=a+"="+t[a]+"&"}),e=e.substring(0,e.length-1)):e},exportLog:function(e){var t=this;this.paramsData.isAll="local"===e?"N":"Y",this.$axios({method:"get",url:this.getUrl(c.a.logOperationExport,this.paramsData),responseType:"blob"}).then(function(e){t.commonFunc.funDownload(e,"galaxy.xlsx")})}})},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"button-group"},[a("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),a("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-download"},on:{click:function(t){e.exportLog("local")}}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-download"},on:{click:function(t){e.exportLog("all")}}},[e._v("全部导出")])],1),e._v(" "),a("el-form",{ref:"opForm",staticClass:"demo-ruleForm",attrs:{model:e.opForm,"label-width":"85px",size:"small"}},[a("el-row",{staticClass:"label-first",attrs:{gutter:20}},[a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"起始时间："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyyMMdd",format:"yyyy-MM-dd"},model:{value:e.opForm.operTimeMin,callback:function(t){e.$set(e.opForm,"operTimeMin",t)},expression:"opForm.operTimeMin"}})],1)],1),e._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"终止时间："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyyMMdd",format:"yyyy-MM-dd"},model:{value:e.opForm.operTimeMax,callback:function(t){e.$set(e.opForm,"operTimeMax",t)},expression:"opForm.operTimeMax"}})],1)],1),e._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"对象："}},[a("el-input",{attrs:{placeholder:"对象名"},model:{value:e.opForm.operNode,callback:function(t){e.$set(e.opForm,"operNode","string"==typeof t?t.trim():t)},expression:"opForm.operNode"}})],1)],1),e._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"操作："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择操作类型"},model:{value:e.opForm.operType,callback:function(t){e.$set(e.opForm,"operType",t)},expression:"opForm.operType"}},e._l(e.level_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"模块："}},[a("el-input",{attrs:{type:"text",placeholder:"模块名"},model:{value:e.opForm.omType,callback:function(t){e.$set(e.opForm,"omType","string"==typeof t?t.trim():t)},expression:"opForm.omType"}})],1)],1),e._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.loading,icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.operationLog.data}},[a("el-table-column",{attrs:{align:"center",prop:"omType",label:"模块",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operNode",label:"对象",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operType",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.operationTypeArray[t.row.operType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operTime",label:"操作时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operAction",label:"操作内容"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"操作人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"operIp",label:"操作IP",width:"130"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.operationLog.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)},staticRenderFns:[]};var g=a("VU/8")(u,m,!1,function(e){a("O7xm")},"data-v-3f8bc59a",null);t.default=g.exports}});