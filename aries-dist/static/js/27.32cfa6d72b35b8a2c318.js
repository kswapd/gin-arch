webpackJsonp([27],{"dP/l":function(e,t){},ubxd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Dd8w"),i=r.n(o),a=r("NYxO"),s={data:function(){return{percentageNum:0,pageNo:1,limit:5,totalPage:10,loading:!0,seacrchContent:"",inputRules:{path:[{required:!0,message:"请输入",trigger:"blur"}],radio:[{required:!0,message:"",trigger:"blur"}],name:[{required:!0,message:"请输入版本名称",trigger:"blur"}],versionNo:[{required:!0,message:"请输入版本号",trigger:"blur"}],creator:[{required:!0,message:"请输入版本号",trigger:"blur"}]},way:"",addVisible:!1,editVisible:!1,verAddForm:{method:"Local",moType:"Redis",fileType:"FULL",creator:"admin"},verEditForm:{},radio:"",fileValue:""}},computed:i()({},Object(a.d)({redisVersion:function(e){return e.redis.redisVersion}})),mounted:function(){this.redisVerFind()},methods:i()({},Object(a.b)("redis",["findRedisVersion","redisVersionAdd","redisVersionUpdate","redisVersionRemove","redisVersionDownload"]),{handleCurrentChange:function(e){this.pageNo=e,this.redisVerFind()},redisVerFind:function(){this.loading=!0,this.findRedisVersion(this)},handleAdd:function(){this.way="添加redis版本",this.verAddForm={method:"Local",moType:"Redis",fileType:"FULL",creator:window.localStorage.getItem("userName")},this.percentageNum=0,this.radio="",this.fileValue="",this.addVisible=!0},close:function(){this.addVisible=!1,this.$refs.verAddForm.clearValidate(),this.fileValue=""},handleEdit:function(e){this.way="修改redis版本",this.editVisible=!0,this.verEditForm=i()({},e)},saveConfirm:function(){var e=this;"添加redis版本"===e.way&&e.$refs.verAddForm.validate(function(t){if(t){if(!e.radio&&"Local"===e.verAddForm.method)return void e.$message({type:"warning",message:"请上传软件包"});if(!e.verAddForm.path&&"Remote"===e.verAddForm.method)return void e.$message({type:"warning",message:"请输入软件包路径"});e.redisVersionAdd(e)}}),"修改redis版本"===e.way&&e.redisVersionUpdate(e)},deleteRow:function(e){var t=this;t.verEditForm.id=e.id,t.conmmonMethods.makePopBox(t,"删除").then(function(){t.redisVersionRemove(t)})},handleChange:function(e){var t=this.commonFunc.getSuffixName(e.target.files[0].name);[".zip",".gz",".tar"].includes(t)?(this.verAddForm.sourceFile=e.target.files[0],this.radio=e.target.value):this.$message({type:"warning",message:"文件类型不正确,请重新选择文件类型(.tar / .tar.gz / .zip)"})},radioChange:function(e){var t=this;this.verAddForm.method=e,this.$nextTick(function(){t.$refs.inputFileRemote&&t.$refs.inputFileRemote.resetField(),t.$refs.inputFileLocal&&t.$refs.inputFileLocal.resetField(),t.fileValue="",t.radio="",t.verAddForm.sourceFile="",t.verAddForm.path=""})},download:function(e){var t=this;t.conmmonMethods.makePopBox(t,"下载").then(function(){t.downPath=e.path,t.redisVersionDownload(t)})}})},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"redisVersion"},[r("div",{staticClass:"button-group"},[r("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"warning"},on:{click:function(t){e.handleAdd()}}},[e._v(e._s(e.$t("common.add")))])],1),e._v(" "),r("el-form",{attrs:{"label-width":"70px",size:"small"}},[r("el-row",{staticClass:"label-first",attrs:{gutter:20}},[r("el-col",{attrs:{lg:6,xl:4}},[r("el-form-item",{attrs:{label:"版本号："}},[r("el-input",{attrs:{type:"text"},model:{value:e.seacrchContent,callback:function(t){e.seacrchContent="string"==typeof t?t.trim():t},expression:"seacrchContent"}})],1)],1),e._v(" "),r("el-col",{attrs:{lg:6,xl:4}},[r("el-button",{attrs:{type:"primary",size:"small",loading:e.loading,icon:"el-icon-search"},on:{click:e.redisVerFind}},[e._v("\n          "+e._s(e.$t("common.search"))+"\n        ")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.redisVersion}},[r("el-table-column",{attrs:{align:"center",prop:"name",label:e.$t("redis.version.versionName"),width:"150"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("redis.version.version"),width:"110",prop:"versionNo"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"path",label:e.$t("redis.version.savePath")}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("redis.version.versionDesc"),width:"110",prop:"remark"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("redis.version.creater"),width:"110",prop:"creator"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("redis.version.creationDate"),width:"160",prop:"createTime"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("common.operation"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-dropdown",{attrs:{trigger:"click"}},[r("el-button",{attrs:{type:"text",size:"mini"}},[e._v("操作\n            "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("\n                "+e._s(e.$t("common.edit"))+"\n              ")])],1),e._v(" "),r("el-dropdown-item",[r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-download"},on:{click:function(r){e.download(t.row)}}},[e._v("\n                "+e._s(e.$t("common.download"))+"\n              ")])],1),e._v(" "),r("el-dropdown-item",[r("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(r){e.deleteRow(t.row)}}},[e._v(e._s(e.$t("common.delete"))+"\n              ")])],1)],1)],1)]}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{background:"","current-page":e.pageNo,"page-size":e.limit,layout:"total, prev, pager, next, jumper",total:e.totalPage},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:e.way,visible:e.addVisible,width:"40%",center:""},on:{"update:visible":function(t){e.addVisible=t},close:e.close}},[r("el-form",{ref:"verAddForm",attrs:{model:e.verAddForm,rules:e.inputRules,"status-icon":"","label-width":"100px",size:"small"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"软件包来源"}},[r("el-radio-group",{on:{change:e.radioChange},model:{value:e.verAddForm.method,callback:function(t){e.$set(e.verAddForm,"method",t)},expression:"verAddForm.method"}},[r("el-radio",{attrs:{label:"Local"}},[e._v(e._s(e.$t("common.local")))]),e._v(" "),r("el-radio",{attrs:{label:"Remote"}},[e._v(e._s(e.$t("common.server")))])],1)],1)],1)],1),e._v(" "),r("el-row",{directives:[{name:"show",rawName:"v-show",value:"Local"===e.verAddForm.method,expression:"verAddForm.method === 'Local'"}],attrs:{gutter:10}},[r("el-col",{attrs:{span:19}},[r("el-form-item",{ref:"inputFileLocal",staticClass:"is-required",attrs:{prop:"localPath",label:e.$t("coreApp.tableVersion.path")}},[r("el-input",{attrs:{placeholder:"请选择路径"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("input",{staticClass:"input-file",attrs:{type:"file",accept:".zip, .tar, .gz"},domProps:{value:e.fileValue},on:{change:function(t){e.handleChange(t)}}}),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("common.viewFile")))])],1)],1),e._v(" "),r("el-row",{directives:[{name:"show",rawName:"v-show",value:"Remote"===e.verAddForm.method,expression:"verAddForm.method === 'Remote'"}],attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-form-item",{ref:"inputFileRemote",staticClass:"is-required",attrs:{prop:"remotePath",label:e.$t("coreApp.tableVersion.path")}},[r("el-input",{attrs:{placeholder:"请输入路径(例 ./software/Redis/2.8.19/redis-2.8.19.tar)"},model:{value:e.verAddForm.path,callback:function(t){e.$set(e.verAddForm,"path","string"==typeof t?t.trim():t)},expression:"verAddForm.path"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.versionName"),prop:"name"}},[r("el-input",{attrs:{type:"text",maxlength:"50",placeholder:"请输入1-50位字符"},model:{value:e.verAddForm.name,callback:function(t){e.$set(e.verAddForm,"name","string"==typeof t?t.trim():t)},expression:"verAddForm.name"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.versionNum"),prop:"versionNo"}},[r("el-input",{attrs:{type:"text",maxlength:"20",placeholder:"请输入1-20位字符"},model:{value:e.verAddForm.versionNo,callback:function(t){e.$set(e.verAddForm,"versionNo","string"==typeof t?t.trim():t)},expression:"verAddForm.versionNo"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.desc")}},[r("el-input",{attrs:{type:"textarea",maxlength:"100",placeholder:"请输入1-100位字符"},model:{value:e.verAddForm.remark,callback:function(t){e.$set(e.verAddForm,"remark","string"==typeof t?t.trim():t)},expression:"verAddForm.remark"}})],1)],1)],1),e._v(" "),r("el-row",{staticStyle:{"padding-top":"9px"},attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-form-item",[r("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:e.percentageNum,status:"success"}})],1)],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:e.saveConfirm}},[e._v(e._s(e.$t("common.ok")))]),e._v(" "),r("el-button",{attrs:{disabled:e.loading,size:"small"},on:{click:e.close}},[e._v(e._s(e.$t("common.cancel")))])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改redis版本",visible:e.editVisible,width:"40%",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"verEditForm",attrs:{model:e.verEditForm,"status-icon":"","label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.versionName"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{model:{value:e.verEditForm.name,callback:function(t){e.$set(e.verEditForm,"name","string"==typeof t?t.trim():t)},expression:"verEditForm.name"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.versionNum"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{disabled:""},model:{value:e.verEditForm.versionNo,callback:function(t){e.$set(e.verEditForm,"versionNo","string"==typeof t?t.trim():t)},expression:"verEditForm.versionNo"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.type"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{value:"FULL"===e.verEditForm.fileType?"全量":"增量",disabled:""}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.createTime"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{disabled:""},model:{value:e.verEditForm.createTime,callback:function(t){e.$set(e.verEditForm,"createTime","string"==typeof t?t.trim():t)},expression:"verEditForm.createTime"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.createPerson"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{disabled:""},model:{value:e.verEditForm.creator,callback:function(t){e.$set(e.verEditForm,"creator","string"==typeof t?t.trim():t)},expression:"verEditForm.creator"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.path"),prop:"creator"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{disabled:""},model:{value:e.verEditForm.path,callback:function(t){e.$set(e.verEditForm,"path","string"==typeof t?t.trim():t)},expression:"verEditForm.path"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("coreApp.tableVersion.desc")}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:23}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.verEditForm.remark,callback:function(t){e.$set(e.verEditForm,"remark","string"==typeof t?t.trim():t)},expression:"verEditForm.remark"}})],1)],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:e.saveConfirm}},[e._v(e._s(e.$t("common.ok")))]),e._v(" "),r("el-button",{attrs:{disabled:e.loading,size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))])],1)],1)],1)},staticRenderFns:[]};var n=r("VU/8")(s,l,!1,function(e){r("dP/l")},"data-v-67076fd2",null);t.default=n.exports}});