webpackJsonp([48],{kAjI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),i=n("exGp"),r=n.n(i),l=n("Dd8w"),o=n.n(l),u=n("NYxO"),d={data:function(){return{iconVisible:!1,loading:!0,delVisible:!1,handleTitle:"",handleVisible:!1,iconName:"",columns:[{text:"编号",dataIndex:"id",width:70},{text:"名称",dataIndex:"text"},{text:"图标",dataIndex:"icon",type:"icon",align:"center",width:80},{text:"类型",dataIndex:"type",type:"type"}],treeHandel:{text:"菜单操作",width:160},sysMenuForm:{parent_id:"",parent_name:"",name:"",url:"",perms:"",type:"",order_num:"",icon:""}}},computed:o()({},Object(u.d)({menuDataList:function(e){return e.authority.menuDataList}})),mounted:function(){this.getData()},methods:o()({},Object(u.b)("authority",["getMenuList","addSysMenu","editSysMenu","removeMenu","sysMenuById"]),Object(u.b)(["getNavTree"]),{getData:function(){this.getMenuList(this)},resetForm:function(){this.sysMenuForm={parent_id:0,parent_name:"根目录",name:"",url:"",perms:"",type:"",order_num:"",icon:""}},handleAdd:function(e){this.resetForm(),this.handleTitle="添加菜单",this.iconName="",this.handleVisible=!0,e&&(this.sysMenuForm.parent_name=e.text,this.sysMenuForm.parent_id=e.id)},handleEdit:function(e){var t=this;return r()(a.a.mark(function n(){var s,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((s=t).handleTitle="修改菜单",s.handleVisible=!0,i="",!e.hasParent){n.next=11;break}return s.sysMenuForm.sysMenuId=e.parentId,n.next=8,s.sysMenuById(s);case 8:i=n.sent,n.next=12;break;case 11:i="根目录";case 12:s.sysMenuForm={menu_id:e.attributes.id,parent_id:e.parentId,parent_name:i,name:e.attributes.text,url:e.attributes.url,perms:e.attributes.perms,type:e.attributes.type,order_num:e.attributes.order_num,icon:e.attributes.icon},s.iconName=e.attributes.icon;case 14:case"end":return n.stop()}},n,t)}))()},handleCancel:function(){this.iconName="",this.handleVisible=!1},handleDelete:function(e){this.delVisible=!0,this.sysMenuForm.menu_id=e.attributes.id},handleIconSelect:function(){this.iconVisible=!0},handleConfirm:function(){var e=this;return r()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(n=e).sysMenuForm.type){t.next=4;break}return n.$message({type:"warning",message:"菜单类型不为空"}),t.abrupt("return");case 4:if(""!==n.sysMenuForm.name){t.next=7;break}return n.$message({type:"warning",message:"菜单名称不为空"}),t.abrupt("return");case 7:if(n.loading=!0,"添加菜单"!==n.handleTitle){t.next=11;break}return t.next=11,n.addSysMenu(n);case 11:if("修改菜单"!==n.handleTitle){t.next=14;break}return t.next=14,n.editSysMenu(n);case 14:e.handleCancel();case 15:case"end":return t.stop()}},t,e)}))()},deleteRow:function(){this.loading=!0,this.removeMenu(this),this.delVisible=!1}})},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"system-menu"},[n("div",{staticClass:"button-group"},[n("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.handleAdd()}}},[e._v("添加")])],1),e._v(" "),n("tree-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{columns:e.columns,"data-source":e.menuDataList,"tree-handel":e.treeHandel,"expand-place":1},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[n("el-button",{attrs:{type:"text",size:"mini"}},[e._v("\n          操作\n          "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){e.handleEdit(t.row)}}},[e._v("编辑")])],1),e._v(" "),n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(n){e.handleAdd(t.row)}}},[e._v("添加下级")])],1),e._v(" "),n("el-dropdown-item",{attrs:{divided:""}},[n("el-button",{staticClass:"btn-text-red",attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")])],1)],1)],1)]}}])}),e._v(" "),n("el-dialog",{attrs:{title:e.handleTitle,visible:e.handleVisible,width:"30%",center:""},on:{"update:visible":function(t){e.handleVisible=t}}},[n("el-form",{ref:"sysMenuForm",attrs:{model:e.sysMenuForm,"status-icon":"","label-width":"90px",size:"small"}},[n("el-form-item",{attrs:{label:"上级菜单"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text",disabled:""},model:{value:e.sysMenuForm.parent_name,callback:function(t){e.$set(e.sysMenuForm,"parent_name",t)},expression:"sysMenuForm.parent_name"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-radio-group",{model:{value:e.sysMenuForm.type,callback:function(t){e.$set(e.sysMenuForm,"type",t)},expression:"sysMenuForm.type"}},[n("el-radio",{attrs:{label:0}},[e._v("目录")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("菜单")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("按钮")])],1)],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单名称"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text"},model:{value:e.sysMenuForm.name,callback:function(t){e.$set(e.sysMenuForm,"name","string"==typeof t?t.trim():t)},expression:"sysMenuForm.name"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"链接地址"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text"},model:{value:e.sysMenuForm.url,callback:function(t){e.$set(e.sysMenuForm,"url","string"==typeof t?t.trim():t)},expression:"sysMenuForm.url"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"权限标识"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text"},model:{value:e.sysMenuForm.perms,callback:function(t){e.$set(e.sysMenuForm,"perms","string"==typeof t?t.trim():t)},expression:"sysMenuForm.perms"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"排序号"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"text"},model:{value:e.sysMenuForm.order_num,callback:function(t){e.$set(e.sysMenuForm,"order_num","string"==typeof t?t.trim():t)},expression:"sysMenuForm.order_num"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"图标"}},[n("el-row",{attrs:{gutter:5}},[n("el-col",{attrs:{span:18}},[n("el-input",{attrs:{type:"text",placeholder:"例如：fa fa-circle-o"},model:{value:e.iconName,callback:function(t){e.iconName="string"==typeof t?t.trim():t},expression:"iconName"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.handleIconSelect}},[e._v("选择图标")])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.handleConfirm}},[e._v("确 定")]),e._v(" "),n("el-button",{attrs:{size:"small",disabled:e.loading},on:{click:e.handleCancel}},[e._v("取 消")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"删除菜单",visible:e.delVisible,width:"260px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.deleteRow}},[e._v("确 定")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),n("icon-select")],1)},staticRenderFns:[]};var m=n("VU/8")(d,c,!1,function(e){n("tZMK")},null,null);t.default=m.exports},tZMK:function(e,t){}});