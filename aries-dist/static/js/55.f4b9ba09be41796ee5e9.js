webpackJsonp([55],{Gwg5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("woOf"),a=o.n(n),l=o("Xxa5"),r=o.n(l),i=o("exGp"),s=o.n(i),c=o("Dd8w"),m=o.n(c),d=o("NYxO"),g={data:function(){return{options:{maxHeight:"450px"},loading:!1,downLoading:!1,currentPage:1,pageSize:10,onlineForm:{startTime:"",endTime:"",keyWord:"",logLevel:"",tranMode:"galaxy-online"},startDatePicker:this.beginDate(),endDatePicker:this.processDate(),paramsForm:{},levelItems:[{text:"ERROR",value:"ERROR"},{text:"WARN",value:"WARN"},{text:"DEBUG",value:"DEBUG"},{text:"INFO",value:"INFO"}]}},computed:m()({},Object(d.d)({logData:function(e){return e.log.logData},dictTypeData:function(e){return e.dict.dictTypeData},onlineOption:function(e){return e.dict.onlineOption}})),mounted:function(){this.getTypeDict("onlineLog"),this.getOnlineLogIndex("onlineIndex"),this.searchLog()},beforeDestroy:function(){this.currentPage=1},methods:m()({},Object(d.b)("log",["searchLogData","exportLog"]),Object(d.b)("dict",["getTypeDict","getOnlineLogIndex"]),{beginDate:function(){var e=this;return{disabledDate:function(t){return e.onlineForm.endTime?t.getTime()>new Date(e.onlineForm.endTime).getTime():t.getTime()>Date.now()}}},processDate:function(){var e=this;return{disabledDate:function(t){return e.onlineForm.startTime&&t.getTime()<new Date(e.onlineForm.startTime).getTime()||t.getTime()>Date.now()}}},resetForm:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pageSize=e,this.searchLog()},handleCurrentChange:function(e){this.currentPage=e,this.searchLog()},downloadLog:function(){var e=this;return s()(r.a.mark(function t(){var o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o=e).downLoading=!0,t.next=4,o.exportLog(o);case 4:o.downLoading=!1;case 5:case"end":return t.stop()}},t,e)}))()},searchLog:function(e){var t=this;e&&(t.currentPage=1),t.paramsForm=a()({pageNo:t.currentPage,pageSize:t.pageSize},t.onlineForm),t.searchLogData(t)},scrollLoadData:function(){var e=this;!e.loading&&e.currentPage<e.logData.totalPage&&(e.currentPage++,e.searchLog())}})},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"button-group"},[o("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),o("el-button",{attrs:{type:"warning",loading:e.downLoading,size:"small"},on:{click:e.downloadLog}},[o("i",{staticClass:"fa fa-download"}),e._v(" "+e._s(e.$t("common.download")))])],1),e._v(" "),o("el-form",{ref:"onlineForm",attrs:{model:e.onlineForm,"label-width":"85px",size:"small"}},[o("el-row",{staticClass:"label-first",attrs:{gutter:20}},[o("el-col",{attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:"起始日期：",prop:"startTime"}},[o("el-date-picker",{attrs:{type:"datetime","picker-options":e.startDatePicker,placeholder:e.$t("common.selectDate")},model:{value:e.onlineForm.startTime,callback:function(t){e.$set(e.onlineForm,"startTime",t)},expression:"onlineForm.startTime"}})],1)],1),e._v(" "),o("el-col",{attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:"终止日期：",prop:"endTime"}},[o("el-date-picker",{attrs:{type:"datetime","picker-options":e.endDatePicker,placeholder:e.$t("common.selectDate")},model:{value:e.onlineForm.endTime,callback:function(t){e.$set(e.onlineForm,"endTime",t)},expression:"onlineForm.endTime"}})],1)],1),e._v(" "),o("el-col",{attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:"关键字：",prop:"keyWord"}},[o("el-input",{model:{value:e.onlineForm.keyWord,callback:function(t){e.$set(e.onlineForm,"keyWord","string"==typeof t?t.trim():t)},expression:"onlineForm.keyWord"}})],1)],1),e._v(" "),o("el-col",{attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:"日志级别：",prop:"logLevel"}},[o("el-select",{staticClass:"block",attrs:{placeholder:e.$t("common.select")},model:{value:e.onlineForm.logLevel,callback:function(t){e.$set(e.onlineForm,"logLevel",t)},expression:"onlineForm.logLevel"}},[o("el-option",{attrs:{value:"",label:"请选择"}}),e._v(" "),e._l(e.levelItems,function(e,t){return o("el-option",{key:t,attrs:{label:e.text,value:e.value}})})],2)],1)],1),e._v(" "),o("el-col",{attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:"索引：",prop:"tranMode"}},[o("el-select",{staticClass:"block",model:{value:e.onlineForm.tranMode,callback:function(t){e.$set(e.onlineForm,"tranMode",t)},expression:"onlineForm.tranMode"}},[o("el-option",{attrs:{value:"galaxy-online",label:"galaxy-online"}}),e._v(" "),e._l(e.onlineOption,function(e){return o("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})],2)],1)],1),e._v(" "),e._l(e.dictTypeData,function(t){return o("el-col",{key:t.id,attrs:{lg:6,xl:4}},[o("el-form-item",{attrs:{label:t.name+"：",prop:t.value,"label-width":t.name.length+2+"em"}},[o("el-input",{attrs:{type:t.remarks},model:{value:e.onlineForm[t.value],callback:function(o){e.$set(e.onlineForm,t.value,"string"==typeof o?o.trim():o)},expression:"onlineForm[item.value]"}})],1)],1)}),e._v(" "),o("el-col",{staticClass:"mb-15",attrs:{lg:6,xl:4}},[o("el-button",{attrs:{type:"primary",loading:e.loading,icon:"el-icon-search",size:"small"},on:{click:function(t){e.searchLog("search")}}},[e._v(e._s(e.$t("common.search")))]),e._v(" "),o("el-button",{attrs:{type:"warning",disabled:e.loading,size:"small"},on:{click:function(t){e.resetForm("onlineForm")}}},[o("i",{staticClass:"fa fa-refresh"}),e._v(" "+e._s(e.$t("common.reset")))])],1)],2)],1),e._v(" "),o("gl-scroll-load",{staticClass:"log-main",attrs:{options:e.options},on:{scrollLoadData:e.scrollLoadData}},[o("pre",{attrs:{slot:"main"},domProps:{innerHTML:e._s(e.logData.data)},slot:"main"}),e._v(" "),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"log-loading",attrs:{slot:"loading","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)"},slot:"loading"}),e._v(" "),e.currentPage===e.logData.totalPage?o("div",{staticClass:"load-last",attrs:{slot:"footer"},slot:"footer"},[e._v("已经到最后一页了~")]):e._e()])],1)},staticRenderFns:[]};var p=o("VU/8")(g,u,!1,function(e){o("VEfb")},"data-v-0e2e8f00",null);t.default=p.exports},VEfb:function(e,t){}});