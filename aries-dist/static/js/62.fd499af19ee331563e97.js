webpackJsonp([62],{cfZU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),s=a("ifoU"),l=a.n(s),n=a("Dd8w"),r=a.n(n),h=a("NYxO"),c=a("ZlkZ"),m=a("egE+"),d={data:function(){return{date:m.a,time:{text:"1小时",value:3600},resizeIds:[{id:"cpu_pie",width:30},{id:"cpu_line",width:70},{id:"io_pie",width:30},{id:"io_line",width:70},{id:"net_pie",width:30},{id:"net_line",width:70},{id:"memo_pie",width:30},{id:"memo_line",width:70}],titleColor:"#000",tabName:"cpuTitle",loading:!1,timer:null,cpuShow:!1,ioShow:!1,netShow:!1,memoShow:!1,cpuLast:-1,ioLast:-1,netLast:-1,memoLast:-1,cpuData:[],ioData:[],netData:[],memoryData:[]}},computed:r()({},Object(h.d)({isCollapse:function(t){return t.app.isCollapse},theme:function(t){return t.app.theme}}),{hostParams:function(){var t=new l.a([[3600,"time(30s)"],[10800,"time(1m)"],[43200,"time(3m)"],[86400,"time(5m)"],[259200,"time(15m)"],[604800,"time(30m)"],[2592e3,"time(2h)"],[15552e3,"time(12h)"],[31536e3,"time(1d)"]]).get(this.time.value),e=this;return{moType:"Host",ip:e.$route.query.ip,jsonTime:{cpu:e.cpuLast,io:e.ioLast,net:e.netLast,memory:e.memoLast},resolution:t,timeRange:-1===e.cpuLast?e.time.value:3600}}}),watch:{cpuData:function(t){t.length>0&&(this.cpuShow=!0,this.cpuLast=t[t.length-1].time,this.cpuEcharts(t[t.length-1].value.toFixed(2),t))},ioData:function(t){t.length>0&&(this.ioShow=!0,this.ioLast=t[t.length-1].time,this.ioEcharts(t[t.length-1].value.toFixed(2),t))},netData:function(t){t.length>0&&(this.netShow=!0,this.netLast=t[t.length-1].time,this.netEcharts(t[t.length-1].value.toFixed(2),t))},memoryData:function(t){t.length>0&&(this.memoShow=!0,this.memoLast=t[t.length-1].time,this.memoEcharts(t[t.length-1].value.toFixed(2),t))},theme:function(t){if(this.$route.query){this.titleColor={dark:"#ccc"}[t]||"#000",this.echartChange()}}},mounted:function(){this.$route.query&&this.echartChange()},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},methods:{getData:function(){var t=this;t.loading=!0,t.initData(t.hostParams),t.timer=setInterval(function(){t.initData(t.hostParams)},3e4),window.addEventListener("resize",function(){t.echartsResize()})},initData:function(t){var e=this;e.$axios({method:"post",url:c.a.findHostAll,data:o()(t)}).then(function(a){if(e.loading=!1,-1===t.jsonTime.cpu){var i=a.data,o=i.memory,s=i.io,l=i.cpu,n=i.net;e.cpuData=l||[],e.netData=n||[],e.ioData=s||[],e.memoryData=o||[]}else a.data.cpu&&a.data.cpu.length>0&&(e.cpuData=m.b.arrayConcat(e.cpuData,a.data.cpu)),a.data.io&&a.data.io.length>0&&(e.ioData=m.b.arrayConcat(e.ioData,a.data.io)),a.data.net&&a.data.net.length>0&&(e.netData=m.b.arrayConcat(e.netData,a.data.net)),a.data.memory&&a.data.memory.length>0&&(e.memoryData=m.b.arrayConcat(e.memoryData,a.data.memory))}).catch(function(t){e.loading=!1,e.$message.error(t&&t.data&&t.data.message||"ERROR")})},echartChange:function(t){clearInterval(this.timer),this.timer=null,this.time=t||{text:"1小时",value:3600},this.cpuData=[],this.ioData=[],this.netData=[],this.memoryData=[],this.cpuShow=!1,this.ioShow=!1,this.netShow=!1,this.memoShow=!1,this.cpuLast=-1,this.ioLast=-1,this.netLast=-1,this.memoLast=-1,this.getData()},initEcharts:function(t,e,a){var i=this.$refs[t];i.style.width=this.$refs.tabWidth.clientWidth*(a/100)+"px",this.$echarts.init(i).setOption(e,!0)},echartsResize:function(){var t=this;t.resizeIds.forEach(function(e){var a=t.$refs[e.id];a.style.width=t.$refs.tabWidth.clientWidth*(e.width/100)+"px",t.$echarts.init(a).resize()})},dealAxisData:function(t,e,a){var i=this;a.map(function(a){t.push(i.dateFtt("yyyy-MM-dd hh:mm:ss",new Date(parseInt(a.time)))),e.push(a.value.toFixed(2))})},cpuEcharts:function(t,e){var a=this,i=[],o=[];if(e.length>0){a.dealAxisData(i,o,e);var s={color:["#37A2DA","#32C5E9","#67E0E3"],tooltip:{formatter:"{a} <br/>{b} : {c}%"},title:{text:"CPU实时监控(%)",subtext:"时间："+i[i.length-1],textStyle:{color:a.titleColor},subtextStyle:{lineHeight:0,rich:{a:{lineHeight:0}}},left:10,top:-5},series:[{name:"CPU实时监控",type:"gauge",radius:"70%",center:["58%","50%"],min:0,max:100,axisTick:{length:10},axisLabel:{color:"black",distance:-1},axisLine:{lineStyle:{width:10,shadowBlur:0,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},detail:{formatter:"{value}"},data:[{value:t}]}]},l={tooltip:{trigger:"axis"},title:{text:"CPU使用率(%)",left:"center",top:0,textStyle:{color:a.titleColor}},xAxis:{boundaryGap:!1,type:"category",axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{color:"#1e98d3"},splitLine:{show:!1},data:i},yAxis:{type:"value",min:0,max:100,axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{formatter:"{value}%",color:"#1e98d3"},splitLine:{show:!0,color:"#fefefe"}},series:[{name:"CPU使用率",type:"line",itemStyle:{color:"#67C23A",lineStyle:{color:"#67C23A",width:1}},data:o}]};a.initEcharts("cpu_pie",s,a.resizeIds[0].width),a.initEcharts("cpu_line",l,a.resizeIds[1].width),a.cpuShow=!0}else a.cpuShow=!1},ioEcharts:function(t,e){var a=this,i=[],o=[];if(e.length>0){a.dealAxisData(i,o,e);var s={tooltip:{formatter:"{a} <br/>{b} : {c}%"},title:{text:"IO实时监控(%)",subtext:"时间："+i[i.length-1],textStyle:{color:a.titleColor},subtextStyle:{lineHeight:0,rich:{a:{lineHeight:0}}},left:10,top:-5},series:[{name:"IO实时监控",type:"gauge",radius:"70%",center:["58%","50%"],min:0,max:100,axisTick:{length:10},axisLabel:{color:"black",distance:-1},axisLine:{lineStyle:{width:10,shadowBlur:0,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},detail:{formatter:"{value}"},data:[{value:t}]}]},l={tooltip:{trigger:"axis"},title:{text:"IO使用率(%)",left:"center",top:0,textStyle:{color:a.titleColor}},xAxis:{boundaryGap:!1,type:"category",axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{color:"#1e98d3"},data:i},yAxis:{type:"value",min:0,max:100,axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{formatter:"{value}%",color:"#1e98d3"}},series:[{name:"IO使用率",type:"line",itemStyle:{color:"#67C23A",lineStyle:{color:"#67C23A",width:1}},data:o}]};a.initEcharts("io_pie",s,a.resizeIds[2].width),a.initEcharts("io_line",l,a.resizeIds[3].width),a.ioShow=!0}else a.ioShow=!1},netEcharts:function(t,e){var a=this,i=[],o=[];if(e.length>0){a.dealAxisData(i,o,e);var s={tooltip:{formatter:"{a} <br/>{b} : {c}%"},title:{text:"网络实时监控(%)",subtext:"时间："+i[i.length-1],textStyle:{color:a.titleColor},subtextStyle:{lineHeight:0,rich:{a:{lineHeight:0}}},left:10,top:-5},series:[{name:"网络实时监控",type:"gauge",radius:"70%",center:["58%","50%"],min:0,max:100,axisTick:{length:10},axisLabel:{color:"black",distance:-1},axisLine:{lineStyle:{width:10,shadowBlur:0,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},detail:{formatter:"{value}"},data:[{value:t}]}]},l={tooltip:{trigger:"axis"},title:{text:"网络使用率(%)",left:"center",top:0,textStyle:{color:a.titleColor}},xAxis:{boundaryGap:!1,type:"category",axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{color:"#1e98d3"},splitLine:{show:!1},data:i},yAxis:{type:"value",min:0,max:100,axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{formatter:"{value}%",color:"#1e98d3"},splitLine:{show:!0,color:"#fefefe"}},series:[{name:"网络使用率",type:"line",itemStyle:{color:"#67C23A",lineStyle:{color:"#67C23A",width:1}},data:o}]};a.initEcharts("net_pie",s,a.resizeIds[4].width),a.initEcharts("net_line",l,a.resizeIds[5].width),a.netShow=!0}else a.netShow=!1},memoEcharts:function(t,e){var a=this,i=[],o=[];if(e.length>0){a.dealAxisData(i,o,e);var s={tooltip:{formatter:"{a} <br/>{b} : {c}%"},title:{text:"Memory实时监控(%)",subtext:"时间："+i[i.length-1],textStyle:{color:a.titleColor},subtextStyle:{lineHeight:0,rich:{a:{lineHeight:0}}},left:10,top:-5},series:[{name:"Memory实时监控",type:"gauge",radius:"70%",center:["58%","50%"],min:0,max:100,axisTick:{length:10},axisLabel:{color:"black",distance:-1},axisLine:{lineStyle:{width:10,shadowBlur:0,color:[[.3,"#67e0e3"],[.7,"#37a2da"],[1,"#fd666d"]]}},detail:{formatter:"{value}"},data:[{value:t}]}]},l={tooltip:{trigger:"axis"},title:{text:"Memory使用率(%)",left:"center",top:0,textStyle:{color:a.titleColor}},xAxis:{boundaryGap:!1,type:"category",axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{color:"#1e98d3"},data:i},yAxis:{type:"value",min:0,max:100,axisLine:{symbol:["none","arrow"],symbolOffset:[0,10],lineStyle:{color:"#1e98d3",width:1}},axisTick:{length:"0"},axisLabel:{formatter:"{value}%",color:"#1e98d3"}},series:[{name:"Memory使用率",type:"line",itemStyle:{color:"#67C23A",lineStyle:{color:"#67C23A",width:1}},data:o}]};a.initEcharts("memo_pie",s,a.resizeIds[6].width),a.initEcharts("memo_line",l,a.resizeIds[7].width),a.memoShow=!0}else a.memoShow=!1}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"host-echarts"},[a("div",{staticClass:"detail-back"},[a("a",{on:{click:function(e){t.$router.push({name:"hostList"})}}},[a("i",{staticClass:"iconfont icon-fanhui"}),t._v("返回")]),t._v(" "),a("span",{domProps:{textContent:t._s(t.$route.meta.title+"-"+t.$route.query.ip)}})]),t._v(" "),a("el-row",{staticClass:"rd_bottom"},[a("span",{staticStyle:{"line-height":"40px"}},[t._v(t._s(t.$t("echarts.timeSpan")+"："))]),t._v(" "),t._l(t.date,function(e){return a("el-button",{key:e.value,class:{chooseColor:e.text===t.time.text},attrs:{size:"mini",loading:t.loading},on:{click:function(a){t.echartChange(e)}}},[t._v(t._s(e.text)+"\n    ")])})],2),t._v(" "),a("div",[a("span",[t._v("时间：")]),a("span",{staticClass:"rd_time"},[t._v(t._s(t.time.text))]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tabWidth"},[a("el-tabs",{model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:t.$t("hostEcharts.cpuTitle"),name:"cpuTitle"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.cpuShow,expression:"cpuShow"}]},[a("el-col",{attrs:{span:8}},[a("div",{ref:"cpu_pie",staticClass:"echarts"})]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{ref:"cpu_line",staticClass:"echarts"})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.cpuShow,expression:"!cpuShow"}],staticClass:"no-data"},[a("el-col",[t._v("暂无数据")])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.$t("hostEcharts.ioTitle"),name:"ioTitle"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.ioShow,expression:"ioShow"}]},[a("el-col",{attrs:{span:8}},[a("div",{ref:"io_pie",staticClass:"echarts"})]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{ref:"io_line",staticClass:"echarts"})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.ioShow,expression:"!ioShow"}],staticClass:"no-data"},[a("el-col",[t._v("暂无数据")])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.$t("hostEcharts.netTitle"),name:"netTitle"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.netShow,expression:"netShow"}]},[a("el-col",{attrs:{span:8}},[a("div",{ref:"net_pie",staticClass:"echarts"})]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{ref:"net_line",staticClass:"echarts"})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.netShow,expression:"!netShow"}],staticClass:"no-data"},[a("el-col",[t._v("暂无数据")])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:t.$t("hostEcharts.memoTitle"),name:"memoTitle"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.memoShow,expression:"memoShow"}]},[a("el-col",{attrs:{span:8}},[a("div",{ref:"memo_pie",staticClass:"echarts"})]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{ref:"memo_line",staticClass:"echarts"})])],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.memoShow,expression:"!memoShow"}],staticClass:"no-data"},[a("el-col",[t._v("暂无数据")])],1)],1)],1)],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(t){a("sqiy")},"data-v-02606640",null);e.default=p.exports},sqiy:function(t,e){}});