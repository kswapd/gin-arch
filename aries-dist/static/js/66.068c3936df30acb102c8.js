webpackJsonp([66],{buxr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BO1k"),a=i.n(s),n=i("mvHQ"),l=i.n(n),c=i("Dd8w"),o=i.n(c),r=i("NYxO"),u={data:function(){return{sel:null,columns:[{prop:"ip",label:"IP",width:"auto",align:"left"}],activeName:"black",list:{black:"blackList",white:"whiteList"},blackList:[],whiteList:[],flag:!1}},computed:o()({},Object(r.d)({blackList:function(t){return t.gateway.blackList},whiteList:function(t){return t.gateway.whiteList}})),mounted:function(){this.getData("black"),this.status("black")},methods:o()({},Object(r.b)("gateway",["getList","addList","deleteBlack","getStatus","changeListStatus"]),{handleClick:function(t){this.activeName=t.name,this.getData(this.activeName),this.status(this.activeName)},getData:function(t){var e=this;this.getList(t).then(function(i){i.data.forEach(function(t){t.isSet=!1}),"black"===t?e.blackList=i.data:e.whiteList=i.data})},status:function(t){var e=this;this.getStatus(t).then(function(t){e.flag="enable"===t.data})},switchStatus:function(t){var e=this;this.changeListStatus({type:this.activeName,flag:t?"enable":"disable"}).then(function(i){e.$message.success(t?"启用成功":"禁用成功"),e.status(e.activeName)})},add:function(){var t={ip:"",isSet:!0};if(this[this.list[this.activeName]].some(function(t){return!0===t.isSet}))return this.$message.warning("请先保存或取消当前编辑项");this[this.list[this.activeName]].unshift(t),this.sel=JSON.parse(l()(t))},editList:function(t,e){if(this[this.list[this.activeName]].some(function(t){return!0===t.isSet}))return this.$message.warning("请先保存或取消当前编辑项");this.sel=JSON.parse(l()(t)),t.isSet=!0},updateList:function(t,e){var i=this,s=!0,n=!1,l=void 0;try{for(var c,o=a()(this[this.list[this.activeName]]);!(s=(c=o.next()).done);s=!0){var r=c.value;if(r.isSet&&r.id!==t.id)return this.$message.warning("请先保存或取消当前编辑项"),!1}}catch(t){n=!0,l=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw l}}if(t.isSet&&!t.id){if(!this.sel.ip)return void this.$message.error("IP不能为空！");this.addList({ip:this.sel.ip,type:this.activeName}).then(function(s){i.$message.success("添加成功！"),t.isSet=!1,i.sel.id||i[i.list[i.activeName]].splice(e,1),i.getData(i.activeName)})}else{if(!this.sel.ip)return void this.$message.error("IP不能为空！");this.addList({id:this.sel.id,ip:this.sel.ip,type:this.activeName}).then(function(e){i.$message.success("修改成功！"),t.isSet=!1,i.getData(i.activeName)})}},cancel:function(t,e){this.sel.id||this[this.list[this.activeName]].splice(e,1),t.isSet=!t.isSet},deleteList:function(t,e){var i=this;this.$confirm("是否确认删除IP："+t.ip,"删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.deleteBlack(t.id).then(function(t){i.getData(i.activeName)})}).catch(function(){})}})},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"black-white"},[i("div",{staticClass:"button-group clearfix"},[i("div",{staticClass:"pull-left"},[i("span",{staticClass:"route-name"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("el-button",{staticClass:"mb-20",attrs:{size:"small",icon:"el-icon-plus",type:"warning"},on:{click:t.add}},[t._v("添加")])],1),t._v(" "),i("el-switch",{staticClass:"pull-right mt-15",attrs:{"active-text":"启用","inactive-text":"禁用"},on:{change:t.switchStatus},model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}})],1),t._v(" "),i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"黑名单",name:"black"}},[i("el-table",{attrs:{stripe:"",data:t.blackList}},[t._l(t.columns,function(e,s){return i("el-table-column",{key:s,attrs:{prop:e.prop,label:e.label,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.isSet?i("span",[i("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.sel[e.prop],callback:function(i){t.$set(t.sel,e.prop,i)},expression:"sel[item.prop]"}})],1):i("span",[t._v(t._s(s.row[e.prop]))])]}}])})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSet?i("span",[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.updateList(e.row,e.$index)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.cancel(e.row,e.$index)}}},[t._v("取消")])],1):i("span",[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.editList(e.row,e.$index)}}},[t._v("修改")]),t._v(" "),i("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini"},on:{click:function(i){t.deleteList(e.row,e.$index)}}},[t._v("删除")])],1)]}}])})],2)],1),t._v(" "),i("el-tab-pane",{attrs:{label:"白名单",name:"white"}},[i("el-table",{attrs:{stripe:"",data:t.whiteList}},[t._l(t.columns,function(e,s){return i("el-table-column",{key:s,attrs:{prop:e.prop,label:e.label,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.isSet?i("span",[i("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.sel[e.prop],callback:function(i){t.$set(t.sel,e.prop,i)},expression:"sel[item.prop]"}})],1):i("span",[t._v(t._s(s.row[e.prop]))])]}}])})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSet?i("span",[i("el-button",{attrs:{type:"text",size:"mini",disabled:!e.row.isSet},on:{click:function(i){t.updateList(e.row,e.$index)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.cancel(e.row,e.$index)}}},[t._v("取消")])],1):i("span",[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.editList(e.row,e.$index)}}},[t._v("修改")]),t._v(" "),i("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini"},on:{click:function(i){t.deleteList(e.row,e.$index)}}},[t._v("删除")])],1)]}}])})],2)],1)],1)],1)},staticRenderFns:[]},h=i("VU/8")(u,d,!1,null,null,null);e.default=h.exports}});