webpackJsonp([32],{"Lqy/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),l=a.n(o),r=a("Xxa5"),s=a.n(r),n=a("exGp"),i=a.n(n),c=a("Dd8w"),d=a.n(c),m=a("NYxO"),g={data:function(){return{options:{maxHeight:"450px"},loading:!1,downLoading:!1,currentPage:1,pageSize:10,batchForm:{startTime:"",endTime:"",jobId:"",lastRunDate:"",jobTaskId:"",logLevel:"",keyWord:""},paramsForm:{},levelList:[{value:"ERROR",label:"ERROR"},{value:"WARN",label:"WARN"},{value:"DEBUG",label:"DEBUG"},{value:"INFO",label:"INFO"}]}},mounted:function(){this.searchLog()},beforeDestroy:function(){this.currentPage=1},methods:d()({},Object(m.b)("log",["searchLogData","exportLog"]),{resetForm:function(t){this.$refs[t].resetFields()},handleSizeChange:function(t){this.pageSize=t,this.searchLog()},handleCurrentChange:function(t){this.currentPage=t,this.searchLog()},downloadLog:function(){var t=this;return i()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).downLoading=!0,e.next=4,a.exportLog(a);case 4:a.downLoading=!1;case 5:case"end":return e.stop()}},e,t)}))()},searchLog:function(t){var e=this;t&&(e.currentPage=1),e.paramsForm=l()({tranMode:"galaxy-batch",pageNo:e.currentPage,pageSize:e.pageSize},e.batchForm),e.searchLogData(e)},scrollLoadData:function(){var t=this;!t.loading&&t.currentPage<t.logData.totalPage&&(t.currentPage++,t.searchLog())}}),computed:d()({},Object(m.d)({logData:function(t){return t.log.logData}}))},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix"},[a("div",{staticClass:"button-group"},[a("span",{staticClass:"route-name"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),a("el-button",{attrs:{size:"small",type:"warning",loading:t.downLoading},on:{click:t.downloadLog}},[a("i",{staticClass:"fa fa-download"}),t._v(" "+t._s(t.$t("common.download")))])],1),t._v(" "),a("el-form",{ref:"batchForm",staticClass:"demo-ruleForm",attrs:{model:t.batchForm,"label-width":"85px",size:"small"}},[a("el-row",{staticClass:"label-first",attrs:{gutter:20}},[a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"起始日期：",prop:"startTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:t.$t("common.selectDate"),format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.batchForm.startTime,callback:function(e){t.$set(t.batchForm,"startTime",e)},expression:"batchForm.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"终止日期：",prop:"endTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:t.$t("common.selectDate"),format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.batchForm.endTime,callback:function(e){t.$set(t.batchForm,"endTime",e)},expression:"batchForm.endTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"Job名称：",prop:"jobId"}},[a("el-input",{model:{value:t.batchForm.jobId,callback:function(e){t.$set(t.batchForm,"jobId","string"==typeof e?e.trim():e)},expression:"batchForm.jobId"}})],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"Task名称：",prop:"jobTaskId"}},[a("el-input",{model:{value:t.batchForm.jobTaskId,callback:function(e){t.$set(t.batchForm,"jobTaskId","string"==typeof e?e.trim():e)},expression:"batchForm.jobTaskId"}})],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"日志级别：","label-width":"82px",prop:"logLevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("common.select")},model:{value:t.batchForm.logLevel,callback:function(e){t.$set(t.batchForm,"logLevel",e)},expression:"batchForm.logLevel"}},[a("el-option",{attrs:{value:"",label:"请选择"}}),t._v(" "),t._l(t.levelList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"关键字：",prop:"keyWord"}},[a("el-input",{model:{value:t.batchForm.keyWord,callback:function(e){t.$set(t.batchForm,"keyWord","string"==typeof e?e.trim():e)},expression:"batchForm.keyWord"}})],1)],1),t._v(" "),a("el-col",{staticClass:"label-lang",attrs:{lg:6,xl:4}},[a("el-form-item",{attrs:{label:"上次系统运行日期：","label-width":"120px",prop:"lastRunDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"选择日期"},model:{value:t.batchForm.lastRunDate,callback:function(e){t.$set(t.batchForm,"lastRunDate",e)},expression:"batchForm.lastRunDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{lg:6,xl:4}},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.loading,icon:"el-icon-search"},on:{click:function(e){t.searchLog("search")}}},[t._v(t._s(t.$t("common.search")))]),t._v(" "),a("el-button",{attrs:{size:"small",type:"warning",disabled:t.loading},on:{click:function(e){t.resetForm("batchForm")}}},[a("i",{staticClass:"fa fa-refresh"}),t._v(" "+t._s(t.$t("common.reset")))])],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("gl-scroll-load",{staticClass:"log-main",attrs:{options:t.options},on:{scrollLoadData:t.scrollLoadData}},[a("pre",{attrs:{slot:"main"},domProps:{innerHTML:t._s(t.logData.data)},slot:"main"}),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"log-loading",attrs:{slot:"loading","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)"},slot:"loading"}),t._v(" "),t.currentPage===t.logData.totalPage?a("div",{staticClass:"load-last",attrs:{slot:"footer"},slot:"footer"},[t._v("已经到最后一页了~")]):t._e()])],1)},staticRenderFns:[]};var b=a("VU/8")(g,u,!1,function(t){a("UfnK")},"data-v-5adead71",null);e.default=b.exports},UfnK:function(t,e){}});