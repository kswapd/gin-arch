webpackJsonp([68],{"7M5m":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),r=i.n(a),n=i("exGp"),l=i.n(n),o=i("Dd8w"),s=i.n(o),c=i("NYxO"),d=i("ZlkZ"),p=i("0uvK"),u={data:function(){return{handleVisible:!1,handleTitle:"添加字典",dictForm:{},current:1,pageSize:10,dictType:"",columns:[{prop:"id",label:"编号"},{prop:"name",label:"标签名"},{prop:"value",label:"数据值"},{prop:"type",label:"类型"},{prop:"description",label:"描述"}],dictFormRules:{name:[{required:!0,message:"请输入标签名",trigger:"blur"}],value:[{required:!0,message:"请输入数据值",trigger:"blur"}],type:[{required:!0,message:"请输入类型",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}]}}},computed:s()({},Object(c.d)({dictInfo:function(t){return t.dict.dictInfo},typeList:function(t){return t.dict.typeList},loading:function(t){return t.dict.loading},tableLoading:function(t){return t.dict.tableLoading}})),created:function(){this.getDictTypes(),this.getTableData()},methods:s()({},Object(c.b)("dict",["getDictData","tableAction","deleteDict","getDictTypes"]),{getTableData:function(){var t={page:this.current,per_page:this.pageSize,type:this.dictType};this.getDictData(t)},open:function(t,e){if(t&&t.id&&!e)this.dictForm=s()({},t),this.handleTitle="修改字典";else if(t&&t.id&&"add"===e){this.handleTitle="添加字典";var i=t.type,a=t.description;this.dictForm={type:i,description:a}}else this.handleTitle="添加字典",this.dictForm={};this.handleVisible=!0},close:function(){this.$refs.dictForm.resetFields(),this.handleVisible=!1},handleCurrentChange:function(t){this.current=t,this.getTableData()},handleDelete:function(t){var e,i=this,a=this;a.$confirm("确认删除"+t.name+"？","确认",{confirmButtonText:a.$t("common.ok"),cancelButtonText:a.$t("common.cancel"),type:"warning",center:!0,beforeClose:(e=l()(r.a.mark(function e(n,l,o){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!==n){e.next=9;break}return l.confirmButtonLoading=!0,e.next=4,i.deleteDict(t.id);case 4:(s=e.sent)&&s.code===p.d?(l.confirmButtonLoading=!1,a.$message.success("删除成功"),a.getTableData()):(l.confirmButtonLoading=!1,a.$message.error(s&&s.data&&s.data.message||"删除失败")),o(),e.next=10;break;case 9:o();case 10:case"end":return e.stop()}},e,i)})),function(t,i,a){return e.apply(this,arguments)})}).then(function(){}).catch(function(){})},handleConfirm:function(){var t=this,e=this;e.$refs.dictForm.validate(function(i){i&&(e.dictForm.id?e.tableAction({url:d.a.dictEdit,data:t.dictForm,callback:function(){e.$message.success("修改成功"),e.close(),e.current=1,e.getTableData()},callbackError:function(t){e.$message.error(t&&t.data&&t.data.message||"修改失败")}}):e.tableAction({url:d.a.dictAdd,data:t.dictForm,callback:function(){e.$message.success("添加成功"),e.close(),e.current=1,e.getTableData()},callbackError:function(t){e.$message.error(t&&t.data&&t.data.message||"添加失败")}}))})}})},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dict-main"},[i("div",{staticClass:"button-group"},[i("span",{staticClass:"route-name"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.open()}}},[t._v("添加")])],1),t._v(" "),i("el-form",{attrs:{"label-width":"85px","label-position":"right",size:"small"}},[i("el-row",{staticClass:"label-first",attrs:{gutter:20}},[i("el-col",{attrs:{lg:6,xl:4}},[i("el-form-item",{attrs:{label:"字典类型："}},[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.dictType,callback:function(e){t.dictType=e},expression:"dictType"}},[i("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.typeList,function(t,e){return i("el-option",{key:e,attrs:{label:t.type,value:t.type}})})],2)],1)],1),t._v(" "),i("el-col",{attrs:{lg:6,xl:4}},[i("el-button",{attrs:{type:"primary",loading:t.tableLoading,icon:"el-icon-search",size:"small"},on:{click:t.getTableData}},[t._v(t._s(t.$t("common.search"))+"\n        ")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.dictInfo.data}},[t._l(t.columns,function(t){return i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width}})}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-dropdown",{attrs:{trigger:"click"}},[i("el-button",{attrs:{type:"text",size:"mini"}},[t._v("\n            操作"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(i){t.open(e.row)}}},[t._v("修改")])],1),t._v(" "),i("el-dropdown-item",[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(i){t.open(e.row,"add")}}},[t._v("添加")])],1),t._v(" "),i("el-dropdown-item",{attrs:{divided:""}},[i("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除")])],1)],1)],1)]}}])})],2),t._v(" "),i("el-pagination",{attrs:{"current-page":t.current,"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",background:"",total:t.dictInfo.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),i("el-dialog",{attrs:{title:t.handleTitle,visible:t.handleVisible,width:"40%",center:""},on:{"update:visible":function(e){t.handleVisible=e},close:t.close}},[i("el-form",{ref:"dictForm",attrs:{model:t.dictForm,rules:t.dictFormRules,"label-width":"90px",size:"small"}},[i("el-form-item",{attrs:{label:"标签名：",prop:"name"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.name,callback:function(e){t.$set(t.dictForm,"name","string"==typeof e?e.trim():e)},expression:"dictForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"数据值：",prop:"value"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.value,callback:function(e){t.$set(t.dictForm,"value","string"==typeof e?e.trim():e)},expression:"dictForm.value"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型：",prop:"type"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.type,callback:function(e){t.$set(t.dictForm,"type","string"==typeof e?e.trim():e)},expression:"dictForm.type"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述：",prop:"description"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.description,callback:function(e){t.$set(t.dictForm,"description","string"==typeof e?e.trim():e)},expression:"dictForm.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.sort,callback:function(e){t.$set(t.dictForm,"sort","string"==typeof e?e.trim():e)},expression:"dictForm.sort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注信息：",prop:"remarks"}},[i("el-input",{attrs:{type:"text"},model:{value:t.dictForm.remarks,callback:function(e){t.$set(t.dictForm,"remarks","string"==typeof e?e.trim():e)},expression:"dictForm.remarks"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.loading},on:{click:t.handleConfirm}},[t._v("确 定")]),t._v(" "),i("el-button",{attrs:{size:"small",disabled:t.loading},on:{click:t.close}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]},f=i("VU/8")(u,m,!1,null,null,null);e.default=f.exports}});