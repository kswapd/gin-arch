webpackJsonp([50],{"3OXF":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),o=a.n(l),r=a("mvHQ"),n=a.n(r),i=a("Dd8w"),s=a.n(i),m=a("NYxO"),c=a("ZlkZ"),d={data:function(){return{currentPage:1,total:0,loading:!1,strategyForm:{custom_flag:!1},monitorOptions:[],ipOptions:[],addForm:{moLocator:[],metric:"",judge_function_alarm_times:"",judge_function_operators:"",judge_function_threshold:""},strategyVisible:!1,editForm:{moLocator:[],metric:"",judge_function_alarm_times:"",judge_function_operators:"",judge_function_threshold:""},editVisible:!1,formRules:{moType:[{required:!0,message:"请选择对象类型",trigger:"change"}],metric:[{required:!0,message:"请选择监控项",trigger:"change"}],moLocator:[{required:!0,message:"请选择被管对象",trigger:"change"}],judge_function_name:[{required:!0,message:"请选择表达式函数",trigger:"change"}],judge_function_alarm_times:[{required:!0,message:"请选择频次",trigger:"blur"},{pattern:/^\+?[0-9][0-9]*$/,message:"数量必须为数字值"}],judge_function_operators:[{required:!0,message:"请选择关系符",trigger:"change"}],judge_function_interval:[{required:!0,message:"请选择间隔时间",trigger:"blur"},{pattern:/^\+?[1-9][0-9]*$/,message:"数量必须为数字值"}],judge_function_threshold:[{required:!0,message:"请选择阀值",trigger:"blur"},{pattern:/^[0-9]*(\.[0-9]{0,4})?$/,message:"数量必须为数字值"}],level_id:[{required:!0,message:"请选择级别",trigger:"change"}],alarm_max:[{required:!0,message:"请选择告警次数",trigger:"blur"},{pattern:/^\+?[1-9][0-9]*$/,message:"数量必须为数字值"}],cool_down:[{required:!0,message:"请选择冷却时间",trigger:"blur"},{pattern:/^\+?[1-9][0-9]*$/,message:"数量必须为数字值"}],email:[{required:!1,message:"请选择邮箱",trigger:"change"},{pattern:/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/,message:"邮箱格式必须正确"}]}}},computed:s()({},Object(m.d)({strategyInfo:function(e){return e.alarm.strategyInfo},objectType:function(e){return e.alarm.objectType},LevelLogData:function(e){return e.alarm.LevelLogData},strategyFunc:function(e){return e.alarm.strategyFunc},relation:function(e){return e.alarm.relation}}),{colorTo:function(){return this.strategyForm.custom_flag?"info":"primary"},colorBack:function(){return this.strategyForm.custom_flag?"primary":"info"}}),watch:{"addForm.moType":function(e){var t=this,a=this;if(e){this.strategyVisible&&(this.addForm.moLocator=[],this.addForm.metric="");var l={Host:c.a.hostSearchIpList,Galaxy:c.a.alarmNodesConfigCombox,"Connector.":c.a.alarmNodesConfigCombox,Zookeeper:c.a.alarmgetInstallZKCombox,Redis:c.a.alarmInstallRedisCombox};if("Zipkin"!==e){var o=l[e]?l[e]:l.Galaxy;a.$axios.post(o,{moType:e}).then(function(e){t.ipOptions=e.data}).catch(function(e){a.$message.error(e&&e.data&&e.data.message||"ERROR")})}else this.addForm.moLocator=["不选择"];a.$axios.get(c.a.dictListMotype+e,{}).then(function(e){t.monitorOptions=e.data}).catch(function(e){a.$message.error(e&&e.data&&e.data.message||"ERROR")})}},"addForm.judge_function_name":function(e){"count"!==e&&this.strategyVisible&&(this.addForm.judge_function_alarm_times=0)},"editForm.moType":function(e){var t=this,a=this;if(e){this.editVisible&&(this.editForm.moLocator="",this.editForm.metric="");var l={Host:c.a.hostSearchIpList,Galaxy:c.a.alarmNodesConfigCombox,"Connector.":c.a.alarmNodesConfigCombox,Zookeeper:c.a.alarmgetInstallZKCombox,Redis:c.a.alarmInstallRedisCombox};if("Zipkin"!==e){var o=l[e]?l[e]:l.Galaxy;a.$axios.post(o,{moType:e}).then(function(e){t.ipOptions=e.data}).catch(function(e){a.$message.error(e&&e.data&&e.data.message||"ERROR")})}else this.editForm.moLocator="Zipkin不选择";a.$axios.get(c.a.dictListMotype+e,{}).then(function(e){t.monitorOptions=e.data}).catch(function(e){a.$message.error(e&&e.data&&e.data.message||"ERROR")})}},"editForm.judge_function_name":function(e){"count"!==e&&this.editVisible&&(this.editForm.judge_function_alarm_times=0)}},mounted:function(){if(this.objectType.length<=0){this.primaryAlarm({vm:this})}this.search()},methods:s()({},Object(m.b)("alarm",["primaryAlarm","serachAlarm","addAlarm","deleteAlarm","updateAlarm"]),{handleCurrentChange:function(e){this.currentPage=e,this.serachAlarm({vm:this})},search:function(){this.loading=!0,this.currentPage=1;this.serachAlarm({vm:this})},openHandle:function(e,t){var a=this;"editForm"===e?(this.editForm=JSON.parse(n()(t)),this.editForm.moType&&"Zipkin"===this.editForm.moType&&(this.editForm.moLocator="Zipkin不选择"),this.$nextTick(function(){a.editVisible=!0})):(this.addForm={moLocator:[],metric:"",judge_function_alarm_times:"",judge_function_operators:"",judge_function_threshold:""},this.$nextTick(function(){a.strategyVisible=!0}))},cancel:function(e){"editForm"===e?(this.$refs.editForm.resetFields(),this.editVisible=!1):(this.$refs.addForm.resetFields(),this.strategyVisible=!1)},okHandle:function(e){var t=this,a=null;a="addForm"===e?this.addForm:this.editForm;var l=this,r=o()({},JSON.parse(n()(a)),{custom_flag:this.strategyForm.custom_flag});this.$refs[e].validate(function(a){a?("Zipkin"===r.moType&&(r.moLocator=null),r.judge_function=r.judge_function_name+"("+r.judge_function_threshold+","+r.judge_function_operators+","+r.judge_function_alarm_times+","+r.judge_function_interval+" sec)",delete r.judge_function_name,delete r.judge_function_alarm_times,delete r.judge_function_operators,delete r.judge_function_threshold,delete r.judge_function_interval,t.loading=!0,"addForm"===e&&(r.moLocator_list=r.moLocator,delete r.moLocator,t.addAlarm({vm:l,query:r})),"editForm"===e&&t.updateAlarm({vm:l,query:r})):l.$message({message:"带*的值不能为空！",type:"warning"})})},deleteItem:function(e){var t=this;this.conmmonMethods.makePopBox(this,"删除该策略？").then(function(){t.loading=!0,t.deleteAlarm({vm:t,id:e})})},statusChange:function(e){this.loading=!0;var t=o()({},JSON.parse(n()(e.row)));delete t.judge_function_name,delete t.judge_function_alarm_times,delete t.judge_function_operators,delete t.judge_function_threshold,delete t.judge_function_interval,t.enable?(t.enable=!0,this.updateAlarm({vm:this,query:t})):(t.enable=!1,this.updateAlarm({vm:this,query:t}))},verifyHandle:function(e){var t=this,a={epl:e.epl};e.epl?this.$axios({method:"post",url:c.a.alarmStragegyVerify,data:a}).then(function(e){"0000"===e.code&&t.$message({type:"success",message:"格式正确"})}):this.$message({message:"不能为空！"})},handover:function(e){this.strategyForm.custom_flag=e,this.currentPage=1;this.loading=!0,this.serachAlarm({vm:this})}})},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarm-content"},[a("div",{staticClass:"button-group"},[a("span",{staticClass:"route-name"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",type:"warning",loading:e.loading,size:"small"},on:{click:function(t){e.openHandle("addForm")}}},[e._v(e._s(e.$t("common.add")))]),e._v(" "),a("div",{staticClass:"inline-block ml-10"},[a("el-button-group",[a("el-button",{attrs:{loading:e.loading,type:e.colorTo,icon:"fa fa-laptop",size:"small"},on:{click:function(t){e.handover(!1)}}},[e._v(e._s(e.$t("alarm.normalMode")))]),e._v(" "),a("el-button",{attrs:{loading:e.loading,type:e.colorBack,icon:"fa fa-hand-paper-o",size:"small"},on:{click:function(t){e.handover(!0)}}},[e._v(e._s(e.$t("alarm.advancedMode")))])],1)],1)],1),e._v(" "),a("el-form",{attrs:{model:e.strategyForm,"label-width":"86px","label-position":"right",size:"small"}},[a("el-row",{staticClass:"label-first",attrs:{gutter:20}},[a("el-col",{attrs:{xl:4,lg:6}},[a("el-form-item",{attrs:{label:e.$t("alarm.moType")+"："}},[a("el-select",{attrs:{clearable:""},model:{value:e.strategyForm.moType,callback:function(t){e.$set(e.strategyForm,"moType",t)},expression:"strategyForm.moType"}},e._l(e.objectType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{xl:4,lg:6}},[a("el-form-item",{attrs:{label:e.$t("alarm.level")+"："}},[a("el-select",{attrs:{clearable:""},model:{value:e.strategyForm.level_id,callback:function(t){e.$set(e.strategyForm,"level_id",t)},expression:"strategyForm.level_id"}},e._l(e.LevelLogData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{xl:4,lg:6}},[a("el-button",{attrs:{type:"primary",loading:e.loading,size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v(e._s(e.$t("common.search")))])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.strategyInfo,stripe:""}},[e.strategyForm.custom_flag?e._e():a("el-table-column",{key:"strategTablemoType",attrs:{prop:"moType",align:"center",label:e.$t("alarm.moType")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("filterCommonMoType")(t.row.moType,e.objectType,"value"))+"\n      ")]}}])}),e._v(" "),e.strategyForm.custom_flag?e._e():a("el-table-column",{key:"strategTablemetric",attrs:{prop:"metric",align:"center",label:e.$t("alarm.metric")}}),e._v(" "),e.strategyForm.custom_flag?e._e():a("el-table-column",{key:"strategTablemoLocator",attrs:{prop:"moLocator",align:"center",label:e.$t("alarm.moLocator")}}),e._v(" "),e.strategyForm.custom_flag?e._e():a("el-table-column",{key:"strategTablejudge_function",attrs:{align:"center",label:e.$t("alarm.function")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.judge_function)+"\n      ")]}}])}),e._v(" "),e.strategyForm.custom_flag?e._e():a("el-table-column",{key:"strategTablecustom_flag",attrs:{align:"center",width:"60",label:e.$t("alarm.frequency")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.judge_function_param?t.row.judge_function_param.alarm_times:"")+"\n      ")]}}])}),e._v(" "),e.strategyForm.custom_flag?a("el-table-column",{key:"strategTableepl",attrs:{prop:"epl",align:"center","min-width":"350","show-overflow-tooltip":"",label:"epl"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{width:"90",align:"center",label:e.$t("alarm.level")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("filterCommonMoType")(t.row.level_id,e.LevelLogData,"id"))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"alarm_max",align:"center",width:"60",label:e.$t("alarm.alarm_max")}}),e._v(" "),a("el-table-column",{attrs:{width:"70",align:"center",label:e.$t("alarm.enable_email")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.enable_email?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"email",align:"center",width:"140",label:e.$t("alarm.email")}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"60",label:e.$t("common.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.enable?"启用":"禁用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.statusChange(t)}},model:{value:t.row.enable,callback:function(a){e.$set(t.row,"enable",a)},expression:"props.row.enable"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",fixed:"right",label:e.$t("common.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"fa fa-pencil-square-o"},on:{click:function(a){e.openHandle("editForm",t.row)}}},[e._v("\n          "+e._s(e.$t("common.modify"))+"\n        ")]),e._v(" "),a("el-button",{staticClass:"btn-text-red",attrs:{type:"text",size:"mini",icon:"fa fa-trash"},on:{click:function(a){e.deleteItem(t.row.id)}}},[e._v(e._s(e.$t("common.delete")))])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",background:"",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加告警策略",visible:e.strategyVisible,width:"50%",center:""},on:{"update:visible":function(t){e.strategyVisible=t},close:function(t){e.cancel("addForm")}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.formRules,"label-width":"104px",size:"small"},on:{close:function(t){e.cancel()}}},[e.strategyForm.custom_flag?e._e():a("div",{key:"custom_flag_add_false"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.moType"),prop:"moType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addForm.moType,callback:function(t){e.$set(e.addForm,"moType",t)},expression:"addForm.moType"}},e._l(e.objectType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.function"),prop:"judge_function_name"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addForm.judge_function_name,callback:function(t){e.$set(e.addForm,"judge_function_name",t)},expression:"addForm.judge_function_name"}},e._l(e.strategyFunc,function(e){return a("el-option",{key:e.pkValue,attrs:{label:e.pkDesc,value:e.pkValue}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.moLocator"),prop:"moLocator"}},[a("el-select",{key:"strategyMultiple",staticStyle:{width:"100%"},attrs:{disabled:"Zipkin"===e.addForm.moType,multiple:"",clearable:""},model:{value:e.addForm.moLocator,callback:function(t){e.$set(e.addForm,"moLocator",t)},expression:"addForm.moLocator"}},e._l(e.ipOptions,function(e){return a("el-option",{key:e.pkValue,attrs:{label:e.pkDesc,value:e.pkValue}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.frequency"),prop:"judge_function_alarm_times"}},[a("el-input",{attrs:{disabled:"count"!==e.addForm.judge_function_name,placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.addForm.judge_function_alarm_times,callback:function(t){e.$set(e.addForm,"judge_function_alarm_times","string"==typeof t?t.trim():t)},expression:"addForm.judge_function_alarm_times"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.metric"),prop:"metric"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addForm.metric,callback:function(t){e.$set(e.addForm,"metric",t)},expression:"addForm.metric"}},e._l(e.monitorOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.operators"),prop:"judge_function_operators"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addForm.judge_function_operators,callback:function(t){e.$set(e.addForm,"judge_function_operators",t)},expression:"addForm.judge_function_operators"}},e._l(e.relation,function(e){return a("el-option",{key:e.id,attrs:{label:e.lable,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.interval")+"(秒)",prop:"judge_function_interval"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.addForm.judge_function_interval,callback:function(t){e.$set(e.addForm,"judge_function_interval","string"==typeof t?t.trim():t)},expression:"addForm.judge_function_interval"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.threshold"),prop:"judge_function_threshold"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.addForm.judge_function_threshold,callback:function(t){e.$set(e.addForm,"judge_function_threshold","string"==typeof t?t.trim():t)},expression:"addForm.judge_function_threshold"}})],1)],1)],1)],1),e._v(" "),e.strategyForm.custom_flag?a("el-row",{key:"custom_flag_add_true"},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"epl",prop:"epl"}},[a("el-input",{attrs:{clearable:"",placeholder:'String epl = "select * from com.dcits.domain.Metric.win:time_batch(5 sec) where 2 < (select count(*) from com.dcits.domain.Metric.win:time(5 sec) where value > 1)";五秒内value值超过1,且次数大于两次,那么触发告警',type:"textarea"},model:{value:e.addForm.epl,callback:function(t){e.$set(e.addForm,"epl","string"==typeof t?t.trim():t)},expression:"addForm.epl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2,align:"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.verifyHandle(e.addForm)}}},[e._v(e._s(e.$t("common.verify")))])],1)],1):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.alarm_max"),prop:"alarm_max"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.addForm.alarm_max,callback:function(t){e.$set(e.addForm,"alarm_max","string"==typeof t?t.trim():t)},expression:"addForm.alarm_max"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.cool_down")+"(秒)",prop:"cool_down"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.addForm.cool_down,callback:function(t){e.$set(e.addForm,"cool_down","string"==typeof t?t.trim():t)},expression:"addForm.cool_down"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.level"),prop:"level_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.addForm.level_id,callback:function(t){e.$set(e.addForm,"level_id",t)},expression:"addForm.level_id"}},e._l(e.LevelLogData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.email"),prop:"email"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email","string"==typeof t?t.trim():t)},expression:"addForm.email"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.enable_email"),prop:"enable_email"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.addForm.enable_email,callback:function(t){e.$set(e.addForm,"enable_email",t)},expression:"addForm.enable_email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:function(t){e.okHandle("addForm")}}},[e._v(e._s(e.$t("common.ok")))]),e._v(" "),a("el-button",{attrs:{disabled:e.loading,size:"small"},on:{click:function(t){e.cancel("addForm")}}},[e._v(e._s(e.$t("common.cancel")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改告警策略",visible:e.editVisible,width:"50%",center:""},on:{"update:visible":function(t){e.editVisible=t},close:function(t){e.cancel("editForm")}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.formRules,"label-width":"104px",size:"small"},on:{close:function(t){e.cancel()}}},[e.strategyForm.custom_flag?e._e():a("div",{key:"custom_flag_edit_false"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.moType"),prop:"moType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.editForm.moType,callback:function(t){e.$set(e.editForm,"moType",t)},expression:"editForm.moType"}},e._l(e.objectType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.function"),prop:"judge_function_name"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.editForm.judge_function_name,callback:function(t){e.$set(e.editForm,"judge_function_name",t)},expression:"editForm.judge_function_name"}},e._l(e.strategyFunc,function(e){return a("el-option",{key:e.pkValue,attrs:{label:e.pkDesc,value:e.pkValue}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.moLocator"),prop:"moLocator"}},[a("el-select",{key:"strategyMultipleNo",staticStyle:{width:"100%"},attrs:{disabled:"Zipkin"===e.editForm.moType,clearable:""},model:{value:e.editForm.moLocator,callback:function(t){e.$set(e.editForm,"moLocator",t)},expression:"editForm.moLocator"}},e._l(e.ipOptions,function(e){return a("el-option",{key:e.pkValue,attrs:{label:e.pkDesc,value:e.pkValue}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.frequency"),prop:"judge_function_alarm_times"}},[a("el-input",{attrs:{disabled:"count"!==e.editForm.judge_function_name,placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.editForm.judge_function_alarm_times,callback:function(t){e.$set(e.editForm,"judge_function_alarm_times","string"==typeof t?t.trim():t)},expression:"editForm.judge_function_alarm_times"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.metric"),prop:"metric"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.editForm.metric,callback:function(t){e.$set(e.editForm,"metric",t)},expression:"editForm.metric"}},e._l(e.monitorOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.operators"),prop:"judge_function_operators"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.editForm.judge_function_operators,callback:function(t){e.$set(e.editForm,"judge_function_operators",t)},expression:"editForm.judge_function_operators"}},e._l(e.relation,function(e){return a("el-option",{key:e.id,attrs:{label:e.lable,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.interval")+"(秒)",prop:"judge_function_interval"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.editForm.judge_function_interval,callback:function(t){e.$set(e.editForm,"judge_function_interval","string"==typeof t?t.trim():t)},expression:"editForm.judge_function_interval"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.threshold"),prop:"judge_function_threshold"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.editForm.judge_function_threshold,callback:function(t){e.$set(e.editForm,"judge_function_threshold","string"==typeof t?t.trim():t)},expression:"editForm.judge_function_threshold"}})],1)],1)],1)],1),e._v(" "),e.strategyForm.custom_flag?a("el-row",{key:"custom_flag_edit_true"},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"epl",prop:"epl"}},[a("el-input",{attrs:{clearable:"",placeholder:'String epl = "select * from com.dcits.domain.Metric.win:time_batch(5 sec) where 2 < (select count(*) from com.dcits.domain.Metric.win:time(5 sec) where value > 1)";五秒内value值超过1,且次数大于两次,那么触发告警',type:"textarea"},model:{value:e.editForm.epl,callback:function(t){e.$set(e.editForm,"epl","string"==typeof t?t.trim():t)},expression:"editForm.epl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2,align:"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.verifyHandle(e.editForm)}}},[e._v(e._s(e.$t("common.verify")))])],1)],1):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.alarm_max"),prop:"alarm_max"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.editForm.alarm_max,callback:function(t){e.$set(e.editForm,"alarm_max","string"==typeof t?t.trim():t)},expression:"editForm.alarm_max"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.cool_down")+"(秒)",prop:"cool_down"}},[a("el-input",{attrs:{placeholder:"请输入1-9位数字",maxlength:"9",clearable:""},model:{value:e.editForm.cool_down,callback:function(t){e.$set(e.editForm,"cool_down","string"==typeof t?t.trim():t)},expression:"editForm.cool_down"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.level"),prop:"level_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.editForm.level_id,callback:function(t){e.$set(e.editForm,"level_id",t)},expression:"editForm.level_id"}},e._l(e.LevelLogData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.email"),prop:"email"}},[a("el-input",{attrs:{clearable:""},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email","string"==typeof t?t.trim():t)},expression:"editForm.email"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("alarm.enable_email"),prop:"enable_email"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.editForm.enable_email,callback:function(t){e.$set(e.editForm,"enable_email",t)},expression:"editForm.enable_email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:function(t){e.okHandle("editForm")}}},[e._v(e._s(e.$t("common.ok")))]),e._v(" "),a("el-button",{attrs:{disabled:e.loading,size:"small"},on:{click:function(t){e.cancel("editForm")}}},[e._v(e._s(e.$t("common.cancel")))])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("PQl8")},null,null);t.default=p.exports},PQl8:function(e,t){}});